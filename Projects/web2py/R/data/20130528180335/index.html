<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html itemtype="http://schema.org/" itemscope="">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

		
<title>web2py - Re: [web2py] Solved -- Problems with special characters and pyfpdf - msg#00107 - Recent Discussion OSDir.com
</title>

	<meta http-equiv="Content-Style-Type" content="text/css">
		
		
		



 

                


<!-- Start of Newest Feb 2012 Google DFP code -->


<!-- End of Goog DFP -->









<meta itemprop="name" content="Re: [web2py] Solved -- Problems with special characters and pyfpdf - web2py">
<meta itemprop="description" content="Re: [web2py] Solved -- Problems with special characters and pyfpdf">



	
<link rel="stylesheet" type="text/css" href="index.css" media="all">
</head>
<body>





				<!-- FANCY BAR -->
				<div id="topBarBox" class="round10">
					<table height="95" width="100%" border="0" cellpadding="0" cellspacing="0">
						<tbody><tr>
							<td id="homeClick" valign="middle" align="left">
								
<font size="+3">osdir.com</font><br>

								<font size="-1">mailing list archive <a href="http://osdir.com/ml/faq.php">F.A.Q.</a> -since 2001!</font>
							</td>
							<td valign="middle">
								<center>
									<div id="osDirAd1Post" class="adContainer banner" style="height: 90px;">
										<div id="google_ads_div_MLTOP728x90"><ins style="position: relative; width: 728px; height: 90px; border: medium none; display: inline-table;"><ins style="position: relative; width: 728px; height: 90px; border: medium none; display: block;"><iframe id="google_ads_iframe_MLTOP728x90" name="google_ads_iframe_MLTOP728x90" vspace="0" hspace="0" allowtransparency="true" marginwidth="0" marginheight="0" style="border: 0px none; left: 0px; position: absolute; top: 0px;" src="index_1.html" frameborder="0" height="90" scrolling="no" width="728"></iframe></ins></ins></div> 
									</div>
								</center>
							</td>
							<td valign="middle" align="right">
								<form action="http://osdir.com/ml/search.html" id="cse-search-box">
								    <input name="cx" value="partner-pub-2048202115983124:opmgflpkuzq" type="hidden"> 
								    <input name="cof" value="FORID:10" type="hidden"> 
								    <input name="ie" value="ISO-8859-1" type="hidden"> 
									<div style="padding-top: 6px;">
								    <input value="" style="background: url('google_custom_search_watermark.gif') no-repeat scroll left center rgb(255, 255, 255);" name="q" size="28" type="text"> 
								    <input name="sa" value="Search" type="submit">
									</div> 
								<input value="osdir.com/ml/web2py/2013-05/msg00107.html" name="siteurl" type="hidden"><input value="www.google.com/search?q=web2py+from+gluon.contrib.pyfpdf+import+FPDF&amp;ie=UTF-8&amp;sa=Search&amp;channel=fe&amp;client=browser-ubuntu&amp;hl=en" name="ref" type="hidden"><input name="ss" type="hidden"><input value="osdir.com/ml/web2py/2013-05/msg00107.html" name="siteurl" type="hidden"><input value="www.google.com/search?q=web2py+from+gluon.contrib.pyfpdf+import+FPDF&amp;ie=UTF-8&amp;sa=Search&amp;channel=fe&amp;client=browser-ubuntu&amp;hl=en" name="ref" type="hidden"><input name="ss" type="hidden"></form>
								
							</td>
						</tr>
					</tbody></table>
				</div>
				<!-- END FANCY BAR -->
			
		
<!-- #PAGE HEADER -->		
		
			
				<center>
				<!-- <div id="adContainerDiv1" class="adContainer banner" style="display: inline; height: 150px;"></div> -->
								</center>
			
		
<!-- #PAGE HEADER END-->
		
			
<!-- PAGE MIDDLE -->
				<table border="0" cellpadding="0" cellspacing="0">
				<tbody><tr>
					<td valign="top" width="10">
	<!-- LEFT COLUMN -->	
<div style="margin-left: 80px;">
<p>
<br><br>


</p></div>
<!-- LEFT COLUMN END -->
					</td>
					<td valign="top" width="1150">
	<!-- MIDDLE COLUMN -->

	                <div class="col1" style="width: 920px;">
							<div class="osDirMsgContainer round10" id="osDirMsgPost" style="position: relative; overflow: auto ! important;">
									 
								<div class="osDirMessageTitle">
																		<h1>Subject: Re: [web2py] Solved -- Problems with special<br>characters and pyfpdf - msg#00107</h1> <span><div id="___plusone_0" style="text-indent: 0px; margin: 0px; padding: 0px; background: none repeat scroll 0% 0% transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 70px; height: 15px;"><iframe title="+1" data-gapiattached="true" allowtransparency="true" src="index_2.html" name="I0_1369753357872" id="I0_1369753357872" vspace="0" tabindex="0" style="position: static; top: 0px; width: 70px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 15px;" marginwidth="0" marginheight="0" hspace="0" frameborder="0" scrolling="no" width="100%"></iframe></div> </span>
							
	<h2>List: <a href="http://osdir.com/ml/web2py/" title="web2py">web2py</a></h2>
</div>

<p>
								</p><div class="osDirPrevNext">
									<center>
									<span style="font-size: smaller;">
									<b>web2py Navigation:</b> 
									</span><br>
								


							

	
									Date:
																			<a href="http://osdir.com/ml/web2py/2013-05/msg00106.html" title="[web2py] Not possible to import reportlab.platypus.doctemplate?">Prev</a>
																												<a href="http://osdir.com/ml/web2py/2013-05/msg00108.html" title="[web2py] Not possible to import reportlab.platypus.doctemplate?">Next</a>
										
									<a href="http://osdir.com/ml/web2py/2013-05/">Date Index</a>
								<!-- <a href='index.html#00107'>Index</a> -->
									Thread:
																			<a href="http://osdir.com/ml/web2py/2013-05/msg00092.html" title="[web2py] Not possible to import reportlab.platypus.doctemplate?">Prev</a>
																												<a href="http://osdir.com/ml/web2py/2013-05/msg00093.html" title="[web2py] Not possible to import reportlab.platypus.doctemplate?">Next</a>
										
									<a href="http://osdir.com/ml/web2py/2013-05/threads.html">Thread Index</a> 
							
									<!-- <a href='threads.html#00107'>Index</a> -->





							</center>	</div><p> </p><p><a href="http://www.rumanalytics.com/" rel="nofollow">Website Performance Monitoring</a>	

							
							
																	
									</p><div id="messspan">Some hoursÂ later...<br>Now I have tried to use the Arial-font:<br><br>pdf.set_font('Arial','',10)<br><br>There is always the same font - set_font seems to do nothing.<br>

<br>Â<br><br><br>
2013/5/2 Martin Weissenboeck &lt;<a rel="nofollow" href="mailto:mweissen@xxxxxxxxx" target="_top">mweissen@xxxxxxxxx</a>&gt;<br>


Hi,<br>I have tried again to generate a pdf file from an htlm file with some unicode characters.<br>There is my test program. It's a simplified version, in the original program there is a lot of additional test lines. <br>



<br>def pp():ÂÂÂÂÂÂÂ <br>ÂÂÂ from gluon.contrib.pyfpdf import FPDF, HTMLMixin<br>ÂÂÂ <br>ÂÂÂ class MyFPDF(FPDF, HTMLMixin):<br>ÂÂÂÂÂÂÂ def header(self): passÂÂÂÂÂÂÂÂÂÂÂ <br>



ÂÂÂÂÂÂÂ def footer(self): passÂÂ <br><br>ÂÂÂ # create a small table with some data:<br>ÂÂÂ rows = [THEAD(TR(TH("Key",_width="70%"), TH("Value",_width="30%"))),<br>ÂÂÂÂÂÂÂÂÂÂÂ TBODY(TR(TD("Hello"),TD("60")), <br>



ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ TR(TD("World ÃÃÃ ÃÃ â"),TD("40")))]<br>ÂÂÂ table = TABLE(*rows, _border="0", _align="center", _width="50%")<br>ÂÂÂ <br>



ÂÂÂ pdf=MyFPDF()<br>ÂÂÂ pdf.add_font('DejaVu', '', 'DejaVuSansCondensed.ttf',Â uni=True)ÂÂÂ <br>ÂÂÂ pdf.add_page()<br>ÂÂÂ pdf.set_font('DejaVu','',10)ÂÂÂÂ # set font method 1<br>



ÂÂÂ # table =TAG.font(table, _face="DejaVu")Â # set font method 2<br>ÂÂÂ html = str(XML(table, sanitize=False))<br>ÂÂÂ pdf.write_html(html)<br>ÂÂÂ response.headers['Content-Type'] = "application/pdf"Â <br>



ÂÂÂ return pdf.output(dest='S')<br><br>I am sure that the font file is loaded, but it seems that the font is not used.<br>I have tried two methods to change the font, but the results are the same.<br>



It doesn't look like Sanserif and every Unicode-Character is printed with every single utf-8 byte. Maybe it's only a small error, but I could not find it.<br><br><br>Regards, Martin<img alt="Inline-Bild 3" src="pngsrsgpy5ref.png"><br>



<br><br>2013/4/30 Jurgis Pralgauskis &lt;<a rel="nofollow" href="mailto:jurgis.pralgauskis@xxxxxxxxx" target="_top">jurgis.pralgauskis@xxxxxxxxx</a>&gt;<br>



&gt; Which font do you want to include?



<br>DejaVu - I guess it covers western languages.. (could be withouth bold/italics to save space)Â<br>




Another one could be for eastern chars (buy I don't know anything about them...)<br>
&gt;ÂI gave you contributor access<br>
Thanks Â:)<br><br>On Wed, May 1, 2013 at 12:22 AM, Mariano Reingart &lt;<a rel="nofollow" href="mailto:reingart@xxxxxxxxx" target="_top">reingart@xxxxxxxxx</a>&gt; wrote:<br>




Which font do you want to include?<br>
<br>
The font pack is 15MB, I don't know if it could be included with web2py.<br>
Also, the problem is that no one is complete (you need several fonts<br>
to cover west / east languages)<br>
<br>
<a rel="nofollow" href="https://pyfpdf.googlecode.com/files/fpdf_unicode_font_pack.zip" target="_top">https://pyfpdf.googlecode.com/files/fpdf_unicode_font_pack.zip</a><br>
<br>
BTW, thanks for you comments, I gave you contributor access, so you<br>
can change the docs directly in the wiki if you like so:<br>
<br>
<a rel="nofollow" href="https://code.google.com/p/pyfpdf/w/list" target="_top">https://code.google.com/p/pyfpdf/w/list</a><br>
<br>
If you have any patch, also I'll be happy to review and include it ;-)<br>
<br>
Best regards,<br>
<br>
Mariano Reingart<br>
<a rel="nofollow" href="http://www.sistemasagiles.com.ar/" target="_top">http://www.sistemasagiles.com.ar</a><br>
<a rel="nofollow" href="http://reingart.blogspot.com/" target="_top">http://reingart.blogspot.com</a><br>
<br>
<br>
On Sun, Apr 28, 2013 at 7:40 AM, Jurgis Pralgauskis<br>
&lt;<a rel="nofollow" href="mailto:jurgis.pralgauskis@xxxxxxxxx" target="_top">jurgis.pralgauskis@xxxxxxxxx</a>&gt; wrote:<br>
&gt; by the way -- would it be possible to pack at least one ttf with web2py,<br>
&gt; and in normalize_text , when it notices unicode,<br>
&gt; automatically add (and set) default ttf font (if such is not set) to render<br>
&gt; ok ?<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt; On Sun, Apr 28, 2013 at 12:18 PM, Jurgis Pralgauskis<br>
&gt; &lt;<a rel="nofollow" href="mailto:jurgis.pralgauskis@xxxxxxxxx" target="_top">jurgis.pralgauskis@xxxxxxxxx</a>&gt; wrote:<br>
&gt;&gt;<br>
&gt;&gt; SOLVED - the problem was that I needed to reload web2py -- for changed<br>
&gt;&gt; html.py to make effect ;)<br>
&gt;&gt;<br>
&gt;&gt; one more issue<br>
&gt;&gt; that after write_html(..) Â it "forgets" the previously set font (should<br>
&gt;&gt; be at least mentioned in docs.. :)<br>
&gt;&gt; <a rel="nofollow" href="https://code.google.com/p/pyfpdf/issues/detail?id=54#c2" target="_top">https://code.google.com/p/pyfpdf/issues/detail?id=54#c2</a><br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; On Sat, Apr 27, 2013 at 9:06 PM, Mariano Reingart &lt;<a rel="nofollow" href="mailto:reingart@xxxxxxxxx" target="_top">reingart@xxxxxxxxx</a>&gt;<br>
&gt;&gt; wrote:<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; Did you add the TTF unicode font with add_font?<br>
&gt;&gt;&gt; Can you post a complete example (ie a script.py just with the code to<br>
&gt;&gt;&gt; test), so I can reproduce it easily.<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; Best regards,<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; Mariano Reingart<br>
&gt;&gt;&gt; <a rel="nofollow" href="http://www.sistemasagiles.com.ar/" target="_top">http://www.sistemasagiles.com.ar</a><br>
&gt;&gt;&gt; <a rel="nofollow" href="http://reingart.blogspot.com/" target="_top">http://reingart.blogspot.com</a><br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; On Sat, Apr 27, 2013 at 7:30 AM, Jurgis Pralgauskis<br>
&gt;&gt;&gt; &lt;<a rel="nofollow" href="mailto:jurgis.pralgauskis@xxxxxxxxx" target="_top">jurgis.pralgauskis@xxxxxxxxx</a>&gt; wrote:<br>
&gt;&gt;&gt; &gt; I see 2 lines were changed, the main<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; - if 'face' in attrs and attrs['face'].lower() in self.font_list:<br>
&gt;&gt;&gt; &gt; + Â if 'face' in attrs:<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; but I still get<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; Â File<br>
&gt;&gt;&gt; &gt; "/home/jurgis/web2py/applications/apskaitele/controllers/default.py",<br>
&gt;&gt;&gt; &gt; line 61, in pdftest<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; Â Â pdf.write_html(u"&lt;font face='DejaVu'&gt;ÄÅuolas&lt;/font&gt;"<br>
&gt;&gt;&gt; &gt; )<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; File "/home/jurgis/web2py/gluon/contrib/fpdf/html.py", line 397, in<br>
&gt;&gt;&gt; &gt; write_html<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; Â File "/usr/local/lib/python2.7/HTMLParser.py", line 114, in feed<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; Â Â self.goahead(0)<br>
&gt;&gt;&gt; &gt; Â File "/usr/local/lib/python2.7/HTMLParser.py", line 152, in goahead<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; Â Â if i &lt; j: self.handle_data(rawdata[i:j])<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; Â File "/home/jurgis/web2py/gluon/contrib/fpdf/html.py", line 122, in<br>
&gt;&gt;&gt; &gt; handle_data<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; Â File "/home/jurgis/web2py/gluon/contrib/fpdf/fpdf.py", line 822, in<br>
&gt;&gt;&gt; &gt; write<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; Â Â txt = self.normalize_text(txt)<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; Â File "/home/jurgis/web2py/gluon/contrib/fpdf/fpdf.py", line 1012, in<br>
&gt;&gt;&gt; &gt; normalize_text<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; Â Â txt = txt.encode('latin1')<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; UnicodeEncodeError: 'latin-1' codec can't encode characters in position<br>
&gt;&gt;&gt; &gt; 0-1:<br>
&gt;&gt;&gt; &gt; ordinal not in range(256<br>
&gt;&gt;&gt; &gt; )<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; and if I<br>
&gt;&gt;&gt; &gt; pdf.write_html(u"&lt;font face='DejaVu'&gt;ÄÅuolas&lt;/font&gt;".encode('utf8'))<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; I get ÃâÃ3â4uolas<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; On Sat, Apr 27, 2013 at 3:24 AM, Mariano Reingart &lt;<a rel="nofollow" href="mailto:reingart@xxxxxxxxx" target="_top">reingart@xxxxxxxxx</a>&gt;<br>
&gt;&gt;&gt; &gt; wrote:<br>
&gt;&gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; Sorry, I misread the email.<br>
&gt;&gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; Unicode fonts were not supported in html2pdf.<br>
&gt;&gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; I've made a change to allow them, please update html.py:<br>
&gt;&gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; <a rel="nofollow" href="https://pyfpdf.googlecode.com/hg/fpdf/html.py" target="_top">https://pyfpdf.googlecode.com/hg/fpdf/html.py</a><br>
&gt;&gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; Then, you need to load a ttf unicode font, and then pass it in &lt;font&gt;<br>
&gt;&gt;&gt; &gt;&gt; face attribute:<br>
&gt;&gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; pdf=MyFPDF()<br>
&gt;&gt;&gt; &gt;&gt; # add utf8 font<br>
&gt;&gt;&gt; &gt;&gt; pdf.add_font('DejaVu', '', 'DejaVuSansCondensed.ttf', uni=True)<br>
&gt;&gt;&gt; &gt;&gt; # first page:<br>
&gt;&gt;&gt; &gt;&gt; pdf.add_page()<br>
&gt;&gt;&gt; &gt;&gt; pdf.write_html(u"&lt;font face='DejaVu'&gt;ÄÅuolas&lt;/font&gt;")<br>
&gt;&gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; For more info and complete code, see:<br>
&gt;&gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; <a rel="nofollow" href="https://code.google.com/p/pyfpdf/wiki/Web2Py" target="_top">https://code.google.com/p/pyfpdf/wiki/Web2Py</a><br>
&gt;&gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; Let me know if that works so I can update the docs and web2py contrib<br>
&gt;&gt;&gt; &gt;&gt; version<br>
&gt;&gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; Best regards<br>
&gt;&gt;&gt; &gt;&gt; Mariano Reingart<br>
&gt;&gt;&gt; &gt;&gt; <a rel="nofollow" href="http://www.sistemasagiles.com.ar/" target="_top">http://www.sistemasagiles.com.ar</a><br>
&gt;&gt;&gt; &gt;&gt; <a rel="nofollow" href="http://reingart.blogspot.com/" target="_top">http://reingart.blogspot.com</a><br>
&gt;&gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; On Fri, Apr 26, 2013 at 11:45 PM, Mariano Reingart<br>
&gt;&gt;&gt; &gt;&gt; &lt;<a rel="nofollow" href="mailto:reingart@xxxxxxxxx" target="_top">reingart@xxxxxxxxx</a>&gt;<br>
&gt;&gt;&gt; &gt;&gt; wrote:<br>
&gt;&gt;&gt; &gt;&gt; &gt; On Fri, Apr 26, 2013 at 11:42 PM, Mariano Reingart<br>
&gt;&gt;&gt; &gt;&gt; &gt; &lt;<a rel="nofollow" href="mailto:reingart@xxxxxxxxx" target="_top">reingart@xxxxxxxxx</a>&gt;<br>
&gt;&gt;&gt; &gt;&gt; &gt; wrote:<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt; On Fri, Apr 26, 2013 at 6:34 PM, Jonathan Lundell<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt; &lt;<a rel="nofollow" href="mailto:jlundell@xxxxxxxxx" target="_top">jlundell@xxxxxxxxx</a>&gt;<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt; wrote:<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; On 26 Apr 2013, at 1:17 PM, Jurgis Pralgauskis<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &lt;<a rel="nofollow" href="mailto:jurgis.pralgauskis@xxxxxxxxx" target="_top">jurgis.pralgauskis@xxxxxxxxx</a>&gt; wrote:<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; ok, SOLVED ttf issue for Âunicode example<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; <a rel="nofollow" href="http://code.google.com/p/pyfpdf/wiki/Unicode" target="_top">http://code.google.com/p/pyfpdf/wiki/Unicode</a><br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; just needed to create directory Â Âgluon &gt; contrib &gt; fpdf &gt; font<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; and place needed ttf files insited it :)<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; then pdf.write(8, u"ÄÅuolas") Âworks fine<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; The fpdf logic uses utf8 for fonts it sees as UTF-based, otherwise<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; latin-1.<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; It looks to me as though either it isn't recognizing your fonts as<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; UTF, or<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; there's some overlooked case that it's making a mistake with. Have<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; a<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; look at<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; FPDF.set_font:<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; Â Â Â Â self.unifontsubset = (self.fonts[fontkey]['type'] ==<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; 'TTF')<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; ...and make sure it's getting set.<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt; Yes, as Jhonatan saids, FPDF (and the PDF standard, BTW) only<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt; support<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt; latin1 characters for standard font.<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; &gt;&gt; If you need utf8 characters, you need to embeed a T<br>
&gt;&gt;&gt; &gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt;&gt; &gt; You need to embed a UTF8 TTF font, for example:<br>
&gt;&gt;&gt; &gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt;&gt; &gt; # Add a DejaVu Unicode font (uses UTF-8)<br>
&gt;&gt;&gt; &gt;&gt; &gt; # Supports more than 200 languages. For a coverage status see:<br>
&gt;&gt;&gt; &gt;&gt; &gt; #<br>
&gt;&gt;&gt; &gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt;&gt; &gt; <a rel="nofollow" href="http://dejavu.svn.sourceforge.net/viewvc/dejavu/trunk/dejavu-fonts/langcover.txt" target="_top">http://dejavu.svn.sourceforge.net/viewvc/dejavu/trunk/dejavu-fonts/langcover.txt</a><br>





&gt;&gt;&gt; &gt;&gt; &gt; pdf.add_font('DejaVu', '', 'DejaVuSansCondensed.ttf', uni=True)<br>
&gt;&gt;&gt; &gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt;&gt; &gt; (sorry, the previous message was sent incomplete)<br>
&gt;&gt;&gt; &gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt;&gt; &gt; I'll try to enhance the docs about this, thank for reporting the<br>
&gt;&gt;&gt; &gt;&gt; &gt; issue<br>
&gt;&gt;&gt; &gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt;&gt; &gt; Best regards<br>
&gt;&gt;&gt; &gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt;&gt; &gt; Mariano Reingart<br>
&gt;&gt;&gt; &gt;&gt; &gt; <a rel="nofollow" href="http://www.sistemasagiles.com.ar/" target="_top">http://www.sistemasagiles.com.ar</a><br>
&gt;&gt;&gt; &gt;&gt; &gt; <a rel="nofollow" href="http://reingart.blogspot.com/" target="_top">http://reingart.blogspot.com</a><br>
&gt;&gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; --<br>
&gt;&gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; ---<br>
&gt;&gt;&gt; &gt;&gt; You received this message because you are subscribed to a topic in the<br>
&gt;&gt;&gt; &gt;&gt; Google Groups "web2py-users" group.<br>
&gt;&gt;&gt; &gt;&gt; To unsubscribe from this topic, visit<br>
&gt;&gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; <a rel="nofollow" href="https://groups.google.com/d/topic/web2py/KJDeQoLKw-M/unsubscribe?hl=en" target="_top">https://groups.google.com/d/topic/web2py/KJDeQoLKw-M/unsubscribe?hl=en</a>.<br>
&gt;&gt;&gt; &gt;&gt; To unsubscribe from this group and all its topics, send an email to<br>
&gt;&gt;&gt; &gt;&gt; <a rel="nofollow" href="mailto:web2py%2Bunsubscribe@xxxxxxxxxxxxxxxx" target="_top">web2py+unsubscribe@xxxxxxxxxxxxxxxx</a>.<br>
&gt;&gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt; For more options, visit <a rel="nofollow" href="https://groups.google.com/groups/opt_out" target="_top">https://groups.google.com/groups/opt_out</a>.<br>
&gt;&gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;&gt;<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; --<br>
&gt;&gt;&gt; &gt; Jurgis Pralgauskis<br>
&gt;&gt;&gt; &gt; tel: 8-616 77613;<br>
&gt;&gt;&gt; &gt; Don't worry, be happy and make things better ;)<br>
&gt;&gt;&gt; &gt; <a rel="nofollow" href="http://galvosukykla.lt/" target="_top">http://galvosukykla.lt</a><br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; --<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt; ---<br>
&gt;&gt;&gt; &gt; You received this message because you are subscribed to the Google<br>
&gt;&gt;&gt; &gt; Groups<br>
&gt;&gt;&gt; &gt; "web2py-users" group.<br>
&gt;&gt;&gt; &gt; To unsubscribe from this group and stop receiving emails from it, send<br>
&gt;&gt;&gt; &gt; an<br>
&gt;&gt;&gt; &gt; email to <a rel="nofollow" href="mailto:web2py%2Bunsubscribe@xxxxxxxxxxxxxxxx" target="_top">web2py+unsubscribe@xxxxxxxxxxxxxxxx</a>.<br>
&gt;&gt;&gt; &gt; For more options, visit <a rel="nofollow" href="https://groups.google.com/groups/opt_out" target="_top">https://groups.google.com/groups/opt_out</a>.<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt; &gt;<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; --<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; ---<br>
&gt;&gt;&gt; You received this message because you are subscribed to a topic in the<br>
&gt;&gt;&gt; Google Groups "web2py-users" group.<br>
&gt;&gt;&gt; To unsubscribe from this topic, visit<br>
&gt;&gt;&gt; <a rel="nofollow" href="https://groups.google.com/d/topic/web2py/KJDeQoLKw-M/unsubscribe?hl=en" target="_top">https://groups.google.com/d/topic/web2py/KJDeQoLKw-M/unsubscribe?hl=en</a>.<br>
&gt;&gt;&gt; To unsubscribe from this group and all its topics, send an email to<br>
&gt;&gt;&gt; <a rel="nofollow" href="mailto:web2py%2Bunsubscribe@xxxxxxxxxxxxxxxx" target="_top">web2py+unsubscribe@xxxxxxxxxxxxxxxx</a>.<br>
&gt;&gt;&gt; For more options, visit <a rel="nofollow" href="https://groups.google.com/groups/opt_out" target="_top">https://groups.google.com/groups/opt_out</a>.<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; --<br>
&gt;&gt; Jurgis Pralgauskis<br>
&gt;&gt; tel: 8-616 77613;<br>
&gt;&gt; Don't worry, be happy and make things better ;)<br>
&gt;&gt; <a rel="nofollow" href="http://galvosukykla.lt/" target="_top">http://galvosukykla.lt</a><br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt; --<br>
&gt; Jurgis Pralgauskis<br>
&gt; tel: 8-616 77613;<br>
&gt; Don't worry, be happy and make things better ;)<br>
&gt; <a rel="nofollow" href="http://galvosukykla.lt/" target="_top">http://galvosukykla.lt</a><br>
&gt;<br>
&gt; --<br>
&gt;<br>
&gt; ---<br>
&gt; You received this message because you are subscribed to the Google Groups<br>
&gt; "web2py-users" group.<br>
&gt; To unsubscribe from this group and stop receiving emails from it, send an<br>
&gt; email to <a rel="nofollow" href="mailto:web2py%2Bunsubscribe@xxxxxxxxxxxxxxxx" target="_top">web2py+unsubscribe@xxxxxxxxxxxxxxxx</a>.<br>
&gt; For more options, visit <a rel="nofollow" href="https://groups.google.com/groups/opt_out" target="_top">https://groups.google.com/groups/opt_out</a>.<br>
&gt;<br>
&gt;<br>
<br>
--<br>
<br>
---<br>
You received this message because you are subscribed to a topic in the Google Groups "web2py-users" group.<br>
To unsubscribe from this topic, visit <a rel="nofollow" href="https://groups.google.com/d/topic/web2py/KJDeQoLKw-M/unsubscribe?hl=en" target="_top">https://groups.google.com/d/topic/web2py/KJDeQoLKw-M/unsubscribe?hl=en</a>.<br>
To unsubscribe from this group and all its topics, send an email to <a rel="nofollow" href="mailto:web2py%2Bunsubscribe@xxxxxxxxxxxxxxxx" target="_top">web2py+unsubscribe@xxxxxxxxxxxxxxxx</a>.<br>
For more options, visit <a rel="nofollow" href="https://groups.google.com/groups/opt_out" target="_top">https://groups.google.com/groups/opt_out</a>.<br>
<br>
<br>
<br><br clear="all"><br>-- <br>Jurgis Pralgauskis<br>tel: 8-616 77613;<br>Don't worry, be happy and make things better ;)<br><a rel="nofollow" href="http://galvosukykla.lt/" target="_top">http://galvosukykla.lt</a>


<p></p>

-- <br>Â
<br><br>

<p></p>

-- <br>
&nbsp;<br>
--- <br>
You received this message because you are subscribed to the Google Groups "web2py-users" group.<br>
To unsubscribe from this group and stop receiving emails from it, send an email to web2py+unsubscribe@xxxxxxxxxxxxxxxxx<br>
For more options, visit <a target="_top" rel="nofollow" href="https://groups.google.com/groups/opt_out">https://groups.google.com/groups/opt_out</a>.<br>
&nbsp;<br>
&nbsp;<br></div>
								</div>
                                                                


<center>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tbody><tr>
<td>
</td>
<td>
<div>

</div>
</td>
</tr>
</tbody></table>
<form action="http://osdir.com/ml/search.html" id="cse-search-box">
  <div>
    <input name="cx" value="partner-pub-2048202115983124:lwylboaindn" type="hidden">
    <input name="cof" value="FORID:9" type="hidden">
    <input name="ie" value="ISO-8859-1" type="hidden">
    <input value="" name="q" size="61" type="text">
    <input name="sa" value="Search" type="submit">
  </div>
</form>  

</center>
<p> 

</p><center>

</center><p> 

							</p><div class="blueBorder round10" style="padding: 5px;"><b>Thread at a glance:</b>

	                				                			<div class="osdirMsgPreview" id="osDirMsgPre3">
	                				<h3 onclick="toggleMe('osDirMsgPre3');">Previous Message by Date:
	                					<!--<span style="font-size: 8pt">(click to view message preview)</span>-->
	                				</h3>
	                				<a href="http://osdir.com/ml/web2py/2013-05/msg00106.html">[web2py] Not possible to import reportlab.platypus.doctemplate?</a><br><br>

















Hallo,so after web2py update my pdf generator with reportlab is not working anymore. So after a long research i dont have any idea how to fix it.&nbsp;Is it possible to get it running again? Thanks a lot!Here is my code.:&nbsp;&lt;type 'exceptions.ImportError'&gt; No module named reportlab.platypus.doctemplateVersionweb2py™Version 2.4.6-stable+timestamp.2013.04.06.17.37.38PythonPython 2.7: N:\web2py\web2py.exe (prefix: N:\web2py)Traceback1.2.3.4.5.6.7.8.Traceback (most recent call last):  File "/home/mdipierro/make_web2py/web2py/gluon/restricted.py", line 212, in restricted  File "N:/web2py/applications/berghuette_8/controllers/pdf.py", line 17, in &lt;module&gt;  File "/home/mdipierro/make_web2py/web2py/gluon/custom_import.py", line 87, in custom_importer  File "applications\berghuette_8\modules\__init__.py", line 11, in &lt;module&gt;  File "/home/mdipierro/make_web2py/web2py/gluon/custom_import.py", line 87, in custom_importerImportError: No module named reportlab.platypus.doctemplateError snapshot&nbsp;&lt;type 'exceptions.ImportError'&gt;(No module named reportlab.platypus.doctemplate)&nbsp;....In file: N:\web2py\applications\berghuette_8\controllers/pdf.py#from reportlab.platypus import *from reportlab import *from reportlab.lib.styles import getSampleStyleSheetfrom reportlab.rl_config import defaultPageSizefrom reportlab.lib.units import inch, mmfrom reportlab.lib.enums import TA_LEFT, TA_RIGHT, TA_CENTER, TA_JUSTIFYfrom reportlab.lib import colorsfrom uuid import uuid4from cgi import escapeimport os



-- 
&nbsp;
--- 
You received this message because you are subscribed to the Google Groups "web2py-users" group.
To unsubscribe from this group and stop receiving emails from it, send an email to web2py+unsubscribe@xxxxxxxxxxxxxxxxx
For more options, visit https://groups.google.com/groups/opt_out.
&nbsp;
&nbsp;















	               				</div>
	               				      			
	                				                			<div class="osdirMsgPreview" id="osDirMsgPre4">
	                				<h3 onclick="toggleMe('osDirMsgPre4');">Next Message by Date:
	                					<!--<span style="font-size: 8pt">click to view message preview</span>-->
	                				</h3>
	                				<a href="http://osdir.com/ml/web2py/2013-05/msg00108.html">[web2py] routes.py</a><br><br>

















Hello all,I want to play with URL revrite. So I took the example in the book (http://web2py.com/books/default/chapter/29/04?search=routes_in#Pattern-based-system)In the file web2py\applications\myApp\routes.py&nbsp; I have :#!/usr/bin/python# -*- coding: utf-8 -*-routes_in = (&nbsp; ('/testme', '/myApp/default/index'),)routes_out = (&nbsp; ('/myApp/default/index', '/testme'),)In web2py root dir, I also added a routes.py file containing :# -*- coding: utf-8 -*-routers = dict(&nbsp; &nbsp; BASE=dict(&nbsp; &nbsp; &nbsp; &nbsp; default_application='myApp',&nbsp; &nbsp; ),)I restarted web2py to reload routes, but when I go on http://127.0.0.1:8000/testme or on http://127.0.0.1:8000/myApp/testme I have an error : invalid function (default/testme)Can somebody explain me what is wrong is my routes.py files?Thank you



-- 
&nbsp;
--- 
You received this message because you are subscribed to the Google Groups "web2py-users" group.
To unsubscribe from this group and stop receiving emails from it, send an email to web2py+unsubscribe@xxxxxxxxxxxxxxxxx
For more options, visit https://groups.google.com/groups/opt_out.
&nbsp;
&nbsp;















	               				</div>
	               				      			

	                				                			<div class="osdirMsgPreview" id="osDirMsgPre1">
	                				<h3 onclick="toggleMe('osDirMsgPre1');">Previous Message by Thread:
	                					<!--<span style="font-size: 8pt">click to view message preview</span>-->
	                				</h3>
	                				<a href="http://osdir.com/ml/web2py/2013-05/msg00092.html">Re: [web2py] Solved -- Problems with special characters and pyfpdf</a><br><br>

















Hi,I have tried again to generate a pdf file from an htlm file with some unicode characters.There is my test program. It's a simplified version, in the original program there is a lot of additional test lines. 

def pp():ÂÂÂÂÂÂÂ ÂÂÂ from gluon.contrib.pyfpdf import FPDF, HTMLMixinÂÂÂ ÂÂÂ class MyFPDF(FPDF, HTMLMixin):ÂÂÂÂÂÂÂ def header(self): passÂÂÂÂÂÂÂÂÂÂÂ 

ÂÂÂÂÂÂÂ def footer(self): passÂÂ ÂÂÂ # create a small table with some data:ÂÂÂ rows = [THEAD(TR(TH("Key",_width="70%"), TH("Value",_width="30%"))),ÂÂÂÂÂÂÂÂÂÂÂ TBODY(TR(TD("Hello"),TD("60")), 

ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ TR(TD("World ÃÃÃ ÃÃ â"),TD("40")))]ÂÂÂ table = TABLE(*rows, _border="0", _align="center", _width="50%")ÂÂÂ 

ÂÂÂ pdf=MyFPDF()ÂÂÂ pdf.add_font('DejaVu', '', 'DejaVuSansCondensed.ttf',Â uni=True)ÂÂÂ ÂÂÂ pdf.add_page()ÂÂÂ pdf.set_font('DejaVu','',10)ÂÂÂÂ # set font method 1

ÂÂÂ # table =TAG.font(table, _face="DejaVu")Â # set font method 2ÂÂÂ html = str(XML(table, sanitize=False))ÂÂÂ pdf.write_html(html)ÂÂÂ response.headers['Content-Type'] = "application/pdf"Â 

ÂÂÂ return pdf.output(dest='S')I am sure that the font file is loaded, but it seems that the font is not used.I have tried two methods to change the font, but the results are the same.

It doesn't look like Sanserif and every Unicode-Character is printed with every single utf-8 byte. Maybe it's only a small error, but I could not find it.Regards, Martin

2013/4/30 Jurgis Pralgauskis &lt;jurgis.pralgauskis@xxxxxxxxx&gt;

&gt; Which font do you want to include?

DejaVu - I guess it covers western languages.. (could be withouth bold/italics to save space)Â


Another one could be for eastern chars (buy I don't know anything about them...)
&gt;ÂI gave you contributor access
Thanks Â:)On Wed, May 1, 2013 at 12:22 AM, Mariano Reingart &lt;reingart@xxxxxxxxx&gt; wrote:


Which font do you want to include?

The font pack is 15MB, I don't know if it could be included with web2py.
Also, the problem is that no one is complete (you need several fonts
to cover west / east languages)

https://pyfpdf.googlecode.com/files/fpdf_unicode_font_pack.zip

BTW, thanks for you comments, I gave you contributor access, so you
can change the docs directly in the wiki if you like so:

https://code.google.com/p/pyfpdf/w/list

If you have any patch, also I'll be happy to review and include it ;-)

Best regards,

Mariano Reingart
http://www.sistemasagiles.com.ar
http://reingart.blogspot.com


On Sun, Apr 28, 2013 at 7:40 AM, Jurgis Pralgauskis
&lt;jurgis.pralgauskis@xxxxxxxxx&gt; wrote:
&gt; by the way -- would it be possible to pack at least one ttf with web2py,
&gt; and in normalize_text , when it notices unicode,
&gt; automatically add (and set) default ttf font (if such is not set) to render
&gt; ok ?
&gt;
&gt;
&gt;
&gt; On Sun, Apr 28, 2013 at 12:18 PM, Jurgis Pralgauskis
&gt; &lt;jurgis.pralgauskis@xxxxxxxxx&gt; wrote:
&gt;&gt;
&gt;&gt; SOLVED - the problem was that I needed to reload web2py -- for changed
&gt;&gt; html.py to make effect ;)
&gt;&gt;
&gt;&gt; one more issue
&gt;&gt; that after write_html(..) Â it "forgets" the previously set font (should
&gt;&gt; be at least mentioned in docs.. :)
&gt;&gt; https://code.google.com/p/pyfpdf/issues/detail?id=54#c2
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Sat, Apr 27, 2013 at 9:06 PM, Mariano Reingart &lt;reingart@xxxxxxxxx&gt;
&gt;&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; Did you add the TTF unicode font with add_font?
&gt;&gt;&gt; Can you post a complete example (ie a script.py just with the code to
&gt;&gt;&gt; test), so I can reproduce it easily.
&gt;&gt;&gt;
&gt;&gt;&gt; Best regards,
&gt;&gt;&gt;
&gt;&gt;&gt; Mariano Reingart
&gt;&gt;&gt; http://www.sistemasagiles.com.ar
&gt;&gt;&gt; http://reingart.blogspot.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Sat, Apr 27, 2013 at 7:30 AM, Jurgis Pralgauskis
&gt;&gt;&gt; &lt;jurgis.pralgauskis@xxxxxxxxx&gt; wrote:
&gt;&gt;&gt; &gt; I see 2 lines were changed, the main
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; - if 'face' in attrs and attrs['face'].lower() in self.font_list:
&gt;&gt;&gt; &gt; + Â if 'face' in attrs:
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; but I still get
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Â File
&gt;&gt;&gt; &gt; "/home/jurgis/web2py/applications/apskaitele/controllers/default.py",
&gt;&gt;&gt; &gt; line 61, in pdftest
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Â Â pdf.write_html(u"&lt;font face='DejaVu'&gt;ÄÅuolas&lt;/font&gt;"
&gt;&gt;&gt; &gt; )
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; File "/home/jurgis/web2py/gluon/contrib/fpdf/html.py", line 397, in
&gt;&gt;&gt; &gt; write_html
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Â File "/usr/local/lib/python2.7/HTMLParser.py", line 114, in feed
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Â Â self.goahead(0)
&gt;&gt;&gt; &gt; Â File "/usr/local/lib/python2.7/HTMLParser.py", line 152, in goahead
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Â Â if i &lt; j: self.handle_data(rawdata[i:j])
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Â File "/home/jurgis/web2py/gluon/contrib/fpdf/html.py", line 122, in
&gt;&gt;&gt; &gt; handle_data
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Â File "/home/jurgis/web2py/gluon/contrib/fpdf/fpdf.py", line 822, in
&gt;&gt;&gt; &gt; write
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Â Â txt = self.normalize_text(txt)
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Â File "/home/jurgis/web2py/gluon/contrib/fpdf/fpdf.py", line 1012, in
&gt;&gt;&gt; &gt; normalize_text
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Â Â txt = txt.encode('latin1')
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; UnicodeEncodeError: 'latin-1' codec can't encode characters in position
&gt;&gt;&gt; &gt; 0-1:
&gt;&gt;&gt; &gt; ordinal not in range(256
&gt;&gt;&gt; &gt; )
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; and if I
&gt;&gt;&gt; &gt; pdf.write_html(u"&lt;font face='DejaVu'&gt;ÄÅuolas&lt;/font&gt;".encode('utf8'))
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; I get ÃâÃ3â4uolas
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; On Sat, Apr 27, 2013 at 3:24 AM, Mariano Reingart &lt;reingart@xxxxxxxxx&gt;
&gt;&gt;&gt; &gt; wrote:
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; Sorry, I misread the email.
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; Unicode fonts were not supported in html2pdf.
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; I've made a change to allow them, please update html.py:
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; https://pyfpdf.googlecode.com/hg/fpdf/html.py
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; Then, you need to load a ttf unicode font, and then pass it in &lt;font&gt;
&gt;&gt;&gt; &gt;&gt; face attribute:
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; pdf=MyFPDF()
&gt;&gt;&gt; &gt;&gt; # add utf8 font
&gt;&gt;&gt; &gt;&gt; pdf.add_font('DejaVu', '', 'DejaVuSansCondensed.ttf', uni=True)
&gt;&gt;&gt; &gt;&gt; # first page:
&gt;&gt;&gt; &gt;&gt; pdf.add_page()
&gt;&gt;&gt; &gt;&gt; pdf.write_html(u"&lt;font face='DejaVu'&gt;ÄÅuolas&lt;/font&gt;")
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; For more info and complete code, see:
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; https://code.google.com/p/pyfpdf/wiki/Web2Py
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; Let me know if that works so I can update the docs and web2py contrib
&gt;&gt;&gt; &gt;&gt; version
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; Best regards
&gt;&gt;&gt; &gt;&gt; Mariano Reingart
&gt;&gt;&gt; &gt;&gt; http://www.sistemasagiles.com.ar
&gt;&gt;&gt; &gt;&gt; http://reingart.blogspot.com
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; On Fri, Apr 26, 2013 at 11:45 PM, Mariano Reingart
&gt;&gt;&gt; &gt;&gt; &lt;reingart@xxxxxxxxx&gt;
&gt;&gt;&gt; &gt;&gt; wrote:
&gt;&gt;&gt; &gt;&gt; &gt; On Fri, Apr 26, 2013 at 11:42 PM, Mariano Reingart
&gt;&gt;&gt; &gt;&gt; &gt; &lt;reingart@xxxxxxxxx&gt;
&gt;&gt;&gt; &gt;&gt; &gt; wrote:
&gt;&gt;&gt; &gt;&gt; &gt;&gt; On Fri, Apr 26, 2013 at 6:34 PM, Jonathan Lundell
&gt;&gt;&gt; &gt;&gt; &gt;&gt; &lt;jlundell@xxxxxxxxx&gt;
&gt;&gt;&gt; &gt;&gt; &gt;&gt; wrote:
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; On 26 Apr 2013, at 1:17 PM, Jurgis Pralgauskis
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &lt;jurgis.pralgauskis@xxxxxxxxx&gt; wrote:
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; ok, SOLVED ttf issue for Âunicode example
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; http://code.google.com/p/pyfpdf/wiki/Unicode
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; just needed to create directory Â Âgluon &gt; contrib &gt; fpdf &gt; font
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; and place needed ttf files insited it :)
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; then pdf.write(8, u"ÄÅuolas") Âworks fine
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; The fpdf logic uses utf8 for fonts it sees as UTF-based, otherwise
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; latin-1.
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; It looks to me as though either it isn't recognizing your fonts as
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; UTF, or
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; there's some overlooked case that it's making a mistake with. Have
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; a
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; look at
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; FPDF.set_font:
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; Â Â Â Â self.unifontsubset = (self.fonts[fontkey]['type'] ==
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; 'TTF')
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt; ...and make sure it's getting set.
&gt;&gt;&gt; &gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt; &gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; &gt;&gt; Yes, as Jhonatan saids, FPDF (and the PDF standard, BTW) only
&gt;&gt;&gt; &gt;&gt; &gt;&gt; support
&gt;&gt;&gt; &gt;&gt; &gt;&gt; latin1 characters for standard font.
&gt;&gt;&gt; &gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; &gt;&gt; If you need utf8 characters, you need to embeed a T
&gt;&gt;&gt; &gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt; &gt; You need to embed a UTF8 TTF font, for example:
&gt;&gt;&gt; &gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt; &gt; # Add a DejaVu Unicode font (uses UTF-8)
&gt;&gt;&gt; &gt;&gt; &gt; # Supports more than 200 languages. For a coverage status see:
&gt;&gt;&gt; &gt;&gt; &gt; #
&gt;&gt;&gt; &gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt; &gt; http://dejavu.svn.sourceforge.net/viewvc/dejavu/trunk/dejavu-fonts/langcover.txt



&gt;&gt;&gt; &gt;&gt; &gt; pdf.add_font('DejaVu', '', 'DejaVuSansCondensed.ttf', uni=True)
&gt;&gt;&gt; &gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt; &gt; (sorry, the previous message was sent incomplete)
&gt;&gt;&gt; &gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt; &gt; I'll try to enhance the docs about this, thank for reporting the
&gt;&gt;&gt; &gt;&gt; &gt; issue
&gt;&gt;&gt; &gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt; &gt; Best regards
&gt;&gt;&gt; &gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt; &gt; Mariano Reingart
&gt;&gt;&gt; &gt;&gt; &gt; http://www.sistemasagiles.com.ar
&gt;&gt;&gt; &gt;&gt; &gt; http://reingart.blogspot.com
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; --
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; ---
&gt;&gt;&gt; &gt;&gt; You received this message because you are subscribed to a topic in the
&gt;&gt;&gt; &gt;&gt; Google Groups "web2py-users" group.
&gt;&gt;&gt; &gt;&gt; To unsubscribe from this topic, visit
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; https://groups.google.com/d/topic/web2py/KJDeQoLKw-M/unsubscribe?hl=en.
&gt;&gt;&gt; &gt;&gt; To unsubscribe from this group and all its topics, send an email to
&gt;&gt;&gt; &gt;&gt; web2py+unsubscribe@xxxxxxxxxxxxxxxx.
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; For more options, visit https://groups.google.com/groups/opt_out.
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; --
&gt;&gt;&gt; &gt; Jurgis Pralgauskis
&gt;&gt;&gt; &gt; tel: 8-616 77613;
&gt;&gt;&gt; &gt; Don't worry, be happy and make things better ;)
&gt;&gt;&gt; &gt; http://galvosukykla.lt
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; --
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; ---
&gt;&gt;&gt; &gt; You received this message because you are subscribed to the Google
&gt;&gt;&gt; &gt; Groups
&gt;&gt;&gt; &gt; "web2py-users" group.
&gt;&gt;&gt; &gt; To unsubscribe from this group and stop receiving emails from it, send
&gt;&gt;&gt; &gt; an
&gt;&gt;&gt; &gt; email to web2py+unsubscribe@xxxxxxxxxxxxxxxx.
&gt;&gt;&gt; &gt; For more options, visit https://groups.google.com/groups/opt_out.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt;
&gt;&gt;&gt; --
&gt;&gt;&gt;
&gt;&gt;&gt; ---
&gt;&gt;&gt; You received this message because you are subscribed to a topic in the
&gt;&gt;&gt; Google Groups "web2py-users" group.
&gt;&gt;&gt; To unsubscribe from this topic, visit
&gt;&gt;&gt; https://groups.google.com/d/topic/web2py/KJDeQoLKw-M/unsubscribe?hl=en.
&gt;&gt;&gt; To unsubscribe from this group and all its topics, send an email to
&gt;&gt;&gt; web2py+unsubscribe@xxxxxxxxxxxxxxxx.
&gt;&gt;&gt; For more options, visit https://groups.google.com/groups/opt_out.
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; Jurgis Pralgauskis
&gt;&gt; tel: 8-616 77613;
&gt;&gt; Don't worry, be happy and make things better ;)
&gt;&gt; http://galvosukykla.lt
&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; Jurgis Pralgauskis
&gt; tel: 8-616 77613;
&gt; Don't worry, be happy and make things better ;)
&gt; http://galvosukykla.lt
&gt;
&gt; --
&gt;
&gt; ---
&gt; You received this message because you are subscribed to the Google Groups
&gt; "web2py-users" group.
&gt; To unsubscribe from this group and stop receiving emails from it, send an
&gt; email to web2py+unsubscribe@xxxxxxxxxxxxxxxx.
&gt; For more options, visit https://groups.google.com/groups/opt_out.
&gt;
&gt;

--

---
You received this message because you are subscribed to a topic in the Google Groups "web2py-users" group.
To unsubscribe from this topic, visit https://groups.google.com/d/topic/web2py/KJDeQoLKw-M/unsubscribe?hl=en.
To unsubscribe from this group and all its topics, send an email to web2py+unsubscribe@xxxxxxxxxxxxxxxx.
For more options, visit https://groups.google.com/groups/opt_out.


-- Jurgis Pralgauskistel: 8-616 77613;Don't worry, be happy and make things better ;)http://galvosukykla.lt




-- 
Â
--- 
You received this message because you are subscribed to the Google Groups "web2py-users" group.
To unsubscribe from this group and stop receiving emails from it, send an email to web2py+unsubscribe@xxxxxxxxxxxxxxxx.
For more options, visit https://groups.google.com/groups/opt_out.Â




-- 
&nbsp;
--- 
You received this message because you are subscribed to the Google Groups "web2py-users" group.
To unsubscribe from this group and stop receiving emails from it, send an email to web2py+unsubscribe@xxxxxxxxxxxxxxxxx
For more options, visit https://groups.google.com/groups/opt_out.
&nbsp;
&nbsp;















	               				</div>
	               				      			
	                				                			<div class="osdirMsgPreview" id="osDirMsgPre2">
	                				<h3 onclick="toggleMe('osDirMsgPre2');">Next Message by Thread:
	                				<!--<span style="font-size: 8pt">click to view message preview</span>-->
	                				</h3>
	                				<a href="http://osdir.com/ml/web2py/2013-05/msg00093.html">[web2py] web2py.test without a web2py server running</a><br><br>

















I made some improvements in web2py.test to allow run tests without a
web2py server running.

See: http://is.gd/vBu6gC

Basically, it uses gluon.compileapp.run_controller_in() function to
run a controller in a web2py environment and calls response.render()
to render a template.

Any suggestions or fixes?

--
Vinicius Assef

-- 

--- 
You received this message because you are subscribed to the Google Groups 
"web2py-users" group.
To unsubscribe from this group and stop receiving emails from it, send an email 
to web2py+unsubscribe@xxxxxxxxxxxxxxxxx
For more options, visit https://groups.google.com/groups/opt_out.

















	               				</div>
	               											</div>


<table><tbody><tr><td>
<div>      
</div>
</td></tr></tbody></table>

<div id="disqus_thread" class="round10">

<!-- <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'osdir'; // required: replace example with your forum shortname

    // The following are highly recommended additional parameters. Remove the slashes in front to use.
    // var disqus_identifier = 'unique_dynamic_id_1234';
    // var disqus_url = 'http://example.com/permalink-to-page.html';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script> -->
<!-- <noscript>Please enable JavaScript to view the <a rel="nofollow" href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a rel="nofollow" href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>  -->
</div>
<center>

<div> 
 
<iframe src="index_94.html" class="blueBorder round10" id="dlistFrame" style="padding: 5px; overflow: hidden;" height="1245" scrolling="no" width="910">
</iframe>
							<div style="display: none;">
								<!-- new frame here -->
								<!--
								<iframe 									
									src="" 									
									width="910" height="400" 
									scrolling="no" 
									id="subfooter" style="padding:5px;overflow:hidden;">
								</iframe>
								-->
							</div>
</div>


	               			</center></div>      			
					<center>	
					                                            <div id="osDirAdN1Post"></div>
                                            <table border="0">
                                                <tbody><tr>
                                                    <td>
							</td><td><div id="osDirAdN2Post"></div></td>
                                                    <td><div id="osDirAdN3Post"></div></td>
                                              </tr>
                                            </tbody></table>
										
					



					</center>
										
							<div style="padding-top: 5px;">
                                                        <center>
								<div id="osDirAd4Post">
																	
								</div>
							</center></div>		

                                                        <div style="padding-top: 5px;"><center>
							<table border="0" cellpadding="0" cellspacing="0">
							<tbody><tr>
								<td><div id="osDirAd5Post">
																	
								</div></td>
								<td><div id="osDirAd6Post">
																	
								</div></td>
							</tr></tbody></table>
							</center>
						</div>		
					
	                
					
	                <div>


<!-- Source Attribution -->




	                <p>	</p><center>
	                		<a href="http://osdir.com/ml" title="Home">Home</a> | <a href="http://osdir.com/">News</a> |  <a href="http://osdir.com/ml/site_dir/">Sitemap</a>  | <a rel="nofollow" href="http://osdir.com/ml/faq.php">FAQ</a> | <a rel="nofollow" href="http://osdir.com/Article9135.phtml">advertise</a> | OSDir is an <a href="http://inevitablecorp.com/">Inevitable</a> website. <a href="http://gbiz.org/">GBiz</a> is too! | Source may include <a href="http://bb10.com/">bb10</a>
	                		 
	                	</center>
	                </div> 
	                
	<!-- MIDDLE COLUMN END -->
					</td>
					<td valign="top" width="370">
	<!-- RIGHT COLUMN -->
<div style="position: absolute; margin-left: 10px;">



<!-- <iframe src="/ml/600.php" width="325" height="625">
</iframe> -->

</div> 
						
<div id="adContainerDiv2" class="adContainer banner">

<div id="osDirAd2Post" style="margin-left: 10px; width: 300px; height: 250px;">
                                                                <div id="google_ads_div_mlTopBlock"><ins style="position: relative; width: 300px; height: 250px; border: medium none; display: inline-table;"><ins style="position: relative; width: 300px; height: 250px; border: medium none; display: block;"><iframe id="google_ads_iframe_mlTopBlock" name="google_ads_iframe_mlTopBlock" vspace="0" hspace="0" allowtransparency="true" marginwidth="0" marginheight="0" style="border: 0px none; left: 0px; position: absolute; top: 0px;" src="index_95.html" frameborder="0" height="250" scrolling="no" width="300"></iframe></ins></ins></div>
                                                        </div>
<p>
						</p><div id="osDirAd3Post" style="margin-left: 10px;">
							<div id="google_ads_div_mlSkyscraperRightCol"><ins style="position: relative; width: 160px; height: 600px; border: medium none; display: inline-table;"><ins style="position: relative; width: 160px; height: 600px; border: medium none; display: block;"><iframe id="google_ads_iframe_mlSkyscraperRightCol" name="google_ads_iframe_mlSkyscraperRightCol" vspace="0" hspace="0" allowtransparency="true" marginwidth="0" marginheight="0" style="border: 0px none; left: 0px; position: absolute; top: 0px;" src="index_96.html" frameborder="0" height="600" scrolling="no" width="160"></iframe></ins></ins></div>
						</div>
		
<p>
</p><div id="recentcomments" class="dsq-widget cleanDis  blueBorder round10" style="width: 300px; margin-left: 10px;">


<h3>Recent Msgs:</h3><a target="_top" href="http://osdir.com/ml/qemu-devel/2013-05/msg02968.html">qemu-devel/2013-05/msg02968.html</a><p><a target="_top" href="http://osdir.com/ml/openlayers-users-gis/2013-05/msg00164.html">openlayers-users-gis/2013-05/msg00164.html</a></p><p><a target="_top" href="http://osdir.com/ml/ubuntu-bugs/2013-05/msg17343.html">ubuntu-bugs/2013-05/msg17343.html</a></p><p><a target="_top" href="http://osdir.com/ml/general/2013-05/msg50109.html">general/2013-05/msg50109.html</a></p><p><a target="_top" href="http://osdir.com/ml/general/2013-05/msg50021.html">general/2013-05/msg50021.html</a></p><p><a target="_top" href="http://osdir.com/ml/iText-pdf-java/2013-05/msg00178.html">iText-pdf-java/2013-05/msg00178.html</a></p><p><a target="_top" href="http://osdir.com/ml/lilypond-user-fr/2013-05/msg00271.html">lilypond-user-fr/2013-05/msg00271.html</a></p><p><a target="_top" href="http://osdir.com/ml/ubuntu-bugs/2013-05/msg17366.html">ubuntu-bugs/2013-05/msg17366.html</a></p><p><a target="_top" href="http://osdir.com/ml/scm-fedora-commits/2013-05/msg15190.html">scm-fedora-commits/2013-05/msg15190.html</a></p><p><a target="_top" href="http://osdir.com/ml/commits.gnome/2013-05/msg05650.html">commits.gnome/2013-05/msg05650.html</a></p><p>
</p></div>

<div style="margin-left: 10px;">
<!-- <a href="http://osdir.com/technology/"><img border="0" src="/ml/images/techsection.gif"></a> -->
</div>

<div id="osDirAd7Post" style="margin-left: 10px;">
	
</div>




							
						<div id="osDirAdCasalePost" style="margin-left: 10px;">
							  				
						</div>
	

						</div>
	<!-- RIGHT COLUMN END -->
				
	</td>
				</tr></tbody></table>
<!-- PAGE MIDDLE END-->
			
		
		
			
				<!-- PAGE FOOTER -->
			
		
	
	<br>





<div style="border: 1px solid rgb(0, 0, 0); display: none;">
</div>







<!-- GOOGLE URCHIN -->


<!-- END GOOGLE URCHIN -->

<!-- G+ Stuff -->







<!-- <script src="http://dev.rumanalytics.com:8081/basic2"></script> --> 

</body>
</html>
