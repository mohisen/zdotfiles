<!DOCTYPE html>
<html foxsplitter-scrolled-x="0=>0" foxsplitter-scrolled-y="399=>399">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

 
 <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
 
 <meta name="ROBOTS" content="NOARCHIVE">
 
 <link rel="icon" type="image/vnd.microsoft.icon" href="phosting.ico">
 
 
 <link rel="canonical" href="http://code.google.com/p/pyfpdf/wiki/Web2Py">
 
 
 
 
 <title>Web2Py - 
 pyfpdf -
 
 web framework integration for PDF report and templates support - 
 Simple PDF generation for Python (FPDF PHP port) AKA fpdf.py - Google Project Hosting
 </title>
 
 
 
 
 
 
 <link type="application/atom+xml" rel="alternate" href="https://code.google.com/feeds/p/pyfpdf/hgchanges/basic?path=/Web2Py.wiki&amp;repo=wiki">
 
 
<!--[if IE]>
 <link type="text/css" rel="stylesheet" href="https://ssl.gstatic.com/codesite/ph/13105533463844027904/css/d_ie.css" >
<![endif]-->
 

<link rel="stylesheet" type="text/css" href="index.css" media="all">
<style id="tabletools2_css">.tt_icon_asc, .tt_icon_desc, .tt_icon_asc1, .tt_icon_desc1, .tt_icon_asc2, .tt_icon_desc2, .tt_icon_asc3, .tt_icon_desc3, .tt_icon_asc4, .tt_icon_desc4 { padding-right: 8px; background-repeat: no-repeat; background-position: center right; }
.tt_icon_asc { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAANCAYAAACKCx+LAAAAKElEQVQYlWNggAGe8/8ZeM7/Z0ABMEEUSXRBuCRMBbJqFCOx2jH0JQCDSj71Y9NI5gAAAABJRU5ErkJggg==); }
.tt_icon_desc { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAANCAYAAACKCx+LAAAAKUlEQVQYlWNggAGe8/8ZeM7/Z8AAQ10CxkGW4Dn/HyGAjlFUY7UHTRAA8BY+9dt90dMAAAAASUVORK5CYII=); }
.tt_icon_asc1 { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAANCAYAAACKCx+LAAAALUlEQVQYlWNggAGe8/8ZeM7/Z0ABMEEUSXRBuCRMBbJqFCMx7MBpFF5XDTYJAOjBRl2TiMRpAAAAAElFTkSuQmCC); }
.tt_icon_desc1 { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAANCAYAAACKCx+LAAAAKklEQVQYlWNggAGe8/8ZeM7/Z8AAg0sCJoCO8etAl+A5/5+AUTjNx2IHAOMuRl3oMgi9AAAAAElFTkSuQmCC); }
.tt_icon_asc2 { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAANCAYAAACKCx+LAAAALUlEQVQYlWNggAGe8/8ZeM7/Z0ABMEEUSXRBuCRMBbJqFCMx7MBpFBV10F4CANvZTcX72GStAAAAAElFTkSuQmCC); }
.tt_icon_desc2 { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAANCAYAAACKCx+LAAAAKklEQVQYlWNggAGe8/8ZeM7/Z8AAtJSACaBjautAl+A5/5+AUTjNx2IHAEi0TcXmBWzoAAAAAElFTkSuQmCC); }
.tt_icon_asc3 { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAANCAYAAACKCx+LAAAALUlEQVQYlWNggAGe8/8ZeM7/Z0ABMEEUSXRBuCRMBbJqFCMx7MBp1IDqIFUCAFySVS21ONifAAAAAElFTkSuQmCC); }
.tt_icon_desc3 { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAANCAYAAACKCx+LAAAAKklEQVQYlWNggAGe8/8ZeM7/Z8AAxEvABNDxwOtAl+A5/5+AUTjNx2IHACCZVS2kOc3PAAAAAElFTkSuQmCC); }
.tt_icon_asc4 { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAANCAYAAACKCx+LAAAAK0lEQVQYlWNggAGe8/8ZeM7/Z0ABMEEUSXRBuCRMBbJqFCMx7MBp1JDSAQBq3VyV9AphZwAAAABJRU5ErkJggg==); }
.tt_icon_desc4 { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAANCAYAAACKCx+LAAAAJklEQVQYlWNggAGe8/8ZeM7/Z8AQQMdDUQe6BM/5/wSMwmk+FjsAat1clW2GeUoAAAAASUVORK5CYII=); }
.tt_it { color: #543; background: #ffc; border: 1px solid #715; width:95%; }
.tt_sel { color: #543; background: #cff; border: 1px solid #517; width:95%; }
.tt_inv { background: #ff0; }
td.tt_found { background: #ff9; }
tr.tt_summary { background: #fcf; }
td.tt_summary { text-align: center; font-size: 10px; }

</style></head>
<body class="t6">

<div class="headbg">

 <div id="gaia">
 

 <span>
 
 
 
 <a href="#" id="multilogin-dropdown" onclick="return false;"><u><b>tazjel@gmail.com</b></u> <small>▼</small></a>
 
 
 | <a href="https://code.google.com/u/105308615563105584901/" id="projects-dropdown" onclick="return false;"><u>My favorites</u> <small>▼</small></a>
 | <a href="https://code.google.com/gb/ph/profile" title="Profile, Updates, and Settings"><u>Profile</u></a>
 | <a href="https://code.google.com/gb/ph/signout"><u>Sign out</u></a>
 
 </span>

 </div>

 <div class="gbh" style="left: 0pt;"></div>
 <div class="gbh" style="right: 0pt;"></div>
 
 
 <div style="height: 1px;"></div>
<!--[if lte IE 7]>
<div style="text-align:center;">
Your version of Internet Explorer is not supported. Try a browser that
contributes to open source, such as <a href="http://www.firefox.com">Firefox</a>,
<a href="http://www.google.com/chrome">Google Chrome</a>, or
<a href="http://code.google.com/chrome/chromeframe/">Google Chrome Frame</a>.
</div>
<![endif]-->



 <table style="padding: 0px; margin: 0px 0px 10px; width: 100%;" itemscope="" itemtype="http://schema.org/CreativeWork" cellpadding="0" cellspacing="0">
 <tbody><tr style="height: 58px;">
 
 
 
 <td id="plogo">
 <link itemprop="url" href="https://code.google.com/p/pyfpdf">
 <a href="https://code.google.com/p/pyfpdf/">
 
 <img src="defaultlogo.png" alt="Logo" itemprop="image">
 
 </a>
 </td>
 
 <td style="padding-left: 0.5em;">
 
 <div id="pname">
 <a href="https://code.google.com/p/pyfpdf/"><span itemprop="name">pyfpdf</span></a>
 </div>
 
 <div id="psum">
 <a id="project_summary_link" href="https://code.google.com/p/pyfpdf/"><span itemprop="description">Simple PDF generation for Python (FPDF PHP port) AKA fpdf.py</span></a>
 
 </div>
 
 
 </td>
 <td style="white-space: nowrap; text-align: right; vertical-align: bottom;">
 
 <form action="https://code.google.com/hosting/search">
 <input size="30" name="q" value="" type="text">
 
 <input name="projectsearch" value="Search projects" type="submit">
 </form>
 
 </td></tr>
 </tbody></table>

</div>

 
<div id="mt" class="gtb"> 
 <a href="https://code.google.com/p/pyfpdf/" class="tab ">Project&nbsp;Home</a>
 
 
 
 
 <a href="https://code.google.com/p/pyfpdf/downloads/list" class="tab ">Downloads</a>
 
 
 
 
 
 <a href="https://code.google.com/p/pyfpdf/w/list" class="tab active">Wiki</a>
 
 
 
 
 
 <a href="https://code.google.com/p/pyfpdf/issues/list" class="tab ">Issues</a>
 
 
 
 
 
 <a href="https://code.google.com/p/pyfpdf/source/browse/" class="tab ">Source</a>
 
 
 
 
 
 
 
 
 <div class="gtbc"></div>
</div>
<table class="st" width="100%" align="center" border="0" cellpadding="0" cellspacing="0">
 <tbody><tr>
 
 
 
 <td class="subt">
 <div class="issueDetail">
<div class="isf">
 
 <span class="inIssueList"> 
 Search
 <form action="https://code.google.com/p/pyfpdf/w/list" method="GET" style="display: inline;">
 <select id="can" name="can">
 <option disabled="disabled">Search within:</option>
 
 <option value="1">&nbsp;All wiki pages</option>
 <option value="3">&nbsp;Featured pages</option>
 <option value="2" selected="selected">&nbsp;Current pages</option>
 
 
 <option value="5">&nbsp;My starred pages</option>
 
 <option value="4">&nbsp;Deprecated pages</option>
 
 </select>
 for
 <span id="qq"><input size="38" id="searchq" name="q" value="" autocomplete="off" type="text"></span>
 
 
 
 <input value="Search" type="submit">
 </form>
 </span>

 
 
 
 
 
 
 

</div>
</div>

 </td>
 
 
 
 
 
 
 <td class="bevel-right" valign="top" align="right"></td>
 </tr>
</tbody></table>



<div id="maincol">

 







 

<div id="wikipage">
<table>
 <tbody><tr>
 
 
 <td style="vertical-align: top; padding-left: 5px;">
 
 <div id="wikiheader">
 
 <img id="star_img" src="star_off.gif" style="cursor: pointer;" onclick="_CS_toggleStar(this,
 {'scope': 'wiki',
 'user': '_CURRENT_USER',
 'item': 'pyfpdf:Web2Py'
 });" height="15" width="15">
 
 <span style="font-size: 120%; font-weight: bold;">Web2Py</span>
 &nbsp;
 <div> 
 
 <i>web framework integration for PDF report and templates support</i>
 
 
 <br>
 
 <a class="label" style="padding-top: 2px;" href="https://code.google.com/p/pyfpdf/w/list?q=label:Featured" title="Listed on project home page">Featured</a>, 
 
 <a class="label" style="padding-top: 2px;" href="https://code.google.com/p/pyfpdf/w/list?q=label:Phase-Support" title="Plans for user support and advocacy">Phase-Support</a>
 
 
 
 <div id="wikiauthor" style="float: right;">
 Updated <span title="Thu Feb  7 02:26:33 2013">
 Feb 7, 2013</span>
 
 by 

 <a class="userlink" href="https://code.google.com/u/102353748566374862863/">leo.m.ro...@gmail.com</a>
 
 </div>
 </div>
 </div>
 
 <div id="wikicontent">
 <div class="vt" id="wikimaincol">
 <p></p><ul><li><a href="#Introduction">Introduction</a></li><li><a href="#Sample_Report">Sample Report</a></li><li><a href="#Sample_Table_Listing">Sample Table Listing</a></li><li><a href="#Samples_Template_Definitions">Samples Template Definitions</a></li><li><a href="#Sample_Templating_Engine">Sample Templating Engine</a></li></ul> <p></p><h1><a name="Introduction"></a>Introduction<a href="#Introduction" class="section_anchor"></a></h1><p>If you use <a href="http://www.web2py.com/" rel="nofollow">web2py</a>, you can make complex reports that can be viewed in a browser, or downloaded as PDF (taking advantage of web2py HTML helper objects to easily diagram a report). See <a href="https://code.google.com/p/pyfpdf/wiki/WriteHTML">WriteHTML</a> for more information, supported tags and attributes, etc. </p><p>Also, using web2py DAL, you can easily set up a templating engine for PDF documents. See <a href="https://code.google.com/p/pyfpdf/wiki/Templates">Templates</a> for more information. </p><p>The following examples are packaged in a ready to run application: <a href="http://pyfpdf.googlecode.com/files/web2py.app.fpdf.w2p" rel="nofollow">web2py.app.fpdf.w2p</a> </p><p>PyFPDF is included in <a href="http://www.web2py.com/" rel="nofollow">web2py</a> since release <a href="http://www.web2py.com/examples/default/download" rel="nofollow">1.85.2</a>  </p><p>Also, you can download the latest versión <a href="http://pyfpdf.googlecode.com/files/pyfpdf-1.54b.zip" rel="nofollow">pyfpdf</a> and uncompress it in the <tt>web2py, gluon, contrib</tt> folder. </p><p><strong>Note about images</strong>: this sample images are small so they may look like low quality ones. For better results, use bigger images: more DPI (screen is often 72/96DPI, printers are often 300/600DPI). As a rule of thumb, use at least half of the image size when rendering to PDF, ie. if image is 500x200px, use 250x100px as width/height attributes of IMG tag. </p><h1><a name="Sample_Report"></a>Sample Report<a href="#Sample_Report" class="section_anchor"></a></h1><p>You could make a "professional looking" bussiness report just using web2py HTML helpers, mixin headers, logos, charts, text and tables. </p><p>Te main advantage of this method is that the same report can be rendered in a HTML view, or can be downloaded as PDF, with a minimal effort: </p><p>Sample: <a href="http://pyfpdf.googlecode.com/files/report.pdf" rel="nofollow">report.pdf</a> </p><p>Updated Live Demo (HTML and PDF version): </p><ul><li><a href="http://www.web2py.com.ar/fpdf/default/report" rel="nofollow">http://www.web2py.com.ar/fpdf/default/report</a> </li><li><a href="http://www.web2py.com.ar/fpdf/default/report.pdf" rel="nofollow">http://www.web2py.com.ar/fpdf/default/report.pdf</a> </li></ul><p></p><pre class="prettyprint"><span class="kwd">def</span><span class="pln"> report</span><span class="pun">():</span><span class="pln"><br>&nbsp; &nbsp; response</span><span class="pun">.</span><span class="pln">title </span><span class="pun">=</span><span class="pln"> </span><span class="str">"web2py sample report"</span><span class="pln"><br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="com"># include a google chart (download it dynamically!)</span><span class="pln"><br>&nbsp; &nbsp; url </span><span class="pun">=</span><span class="pln"> </span><span class="str">"http://chart.apis.google.com/chart?cht=p3&amp;chd=t:60,40&amp;chs=500x200&amp;chl=Hello|World&amp;.png"</span><span class="pln"><br>&nbsp; &nbsp; chart </span><span class="pun">=</span><span class="pln"> IMG</span><span class="pun">(</span><span class="pln">_src</span><span class="pun">=</span><span class="pln">url</span><span class="pun">,</span><span class="pln"> _width</span><span class="pun">=</span><span class="str">"250"</span><span class="pun">,</span><span class="pln">_height</span><span class="pun">=</span><span class="str">"100"</span><span class="pun">)</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="com"># create a small table with some data:</span><span class="pln"><br>&nbsp; &nbsp; rows </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">THEAD</span><span class="pun">(</span><span class="pln">TR</span><span class="pun">(</span><span class="pln">TH</span><span class="pun">(</span><span class="str">"Key"</span><span class="pun">,</span><span class="pln">_width</span><span class="pun">=</span><span class="str">"70%"</span><span class="pun">),</span><span class="pln"> TH</span><span class="pun">(</span><span class="str">"Value"</span><span class="pun">,</span><span class="pln">_width</span><span class="pun">=</span><span class="str">"30%"</span><span class="pun">))),</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TBODY</span><span class="pun">(</span><span class="pln">TR</span><span class="pun">(</span><span class="pln">TD</span><span class="pun">(</span><span class="str">"Hello"</span><span class="pun">),</span><span class="pln">TD</span><span class="pun">(</span><span class="str">"60"</span><span class="pun">)),</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TR</span><span class="pun">(</span><span class="pln">TD</span><span class="pun">(</span><span class="str">"World"</span><span class="pun">),</span><span class="pln">TD</span><span class="pun">(</span><span class="str">"40"</span><span class="pun">)))]</span><span class="pln"><br>&nbsp; &nbsp; table </span><span class="pun">=</span><span class="pln"> TABLE</span><span class="pun">(*</span><span class="pln">rows</span><span class="pun">,</span><span class="pln"> _border</span><span class="pun">=</span><span class="str">"0"</span><span class="pun">,</span><span class="pln"> _align</span><span class="pun">=</span><span class="str">"center"</span><span class="pun">,</span><span class="pln"> _width</span><span class="pun">=</span><span class="str">"50%"</span><span class="pun">)</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> request</span><span class="pun">.</span><span class="pln">extension</span><span class="pun">==</span><span class="str">"pdf"</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">from</span><span class="pln"> gluon</span><span class="pun">.</span><span class="pln">contrib</span><span class="pun">.</span><span class="pln">pyfpdf </span><span class="kwd">import</span><span class="pln"> FPDF</span><span class="pun">,</span><span class="pln"> </span><span class="typ">HTMLMixin</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com"># create a custom class with the required functionalities </span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyFPDF</span><span class="pun">(</span><span class="pln">FPDF</span><span class="pun">,</span><span class="pln"> </span><span class="typ">HTMLMixin</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">def</span><span class="pln"> header</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="str">"hook to draw custom page header (logo and title)"</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logo</span><span class="pun">=</span><span class="pln">os</span><span class="pun">.</span><span class="pln">path</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="pln">request</span><span class="pun">.</span><span class="pln">env</span><span class="pun">.</span><span class="pln">web2py_path</span><span class="pun">,</span><span class="str">"gluon"</span><span class="pun">,</span><span class="str">"contrib"</span><span class="pun">,</span><span class="str">"pyfpdf"</span><span class="pun">,</span><span class="str">"tutorial"</span><span class="pun">,</span><span class="str">"logo_pb.png"</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">image</span><span class="pun">(</span><span class="pln">logo</span><span class="pun">,</span><span class="lit">10</span><span class="pun">,</span><span class="lit">8</span><span class="pun">,</span><span class="lit">33</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">set_font</span><span class="pun">(</span><span class="str">'Arial'</span><span class="pun">,</span><span class="str">'B'</span><span class="pun">,</span><span class="lit">15</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">cell</span><span class="pun">(</span><span class="lit">65</span><span class="pun">)</span><span class="pln"> </span><span class="com"># padding</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">cell</span><span class="pun">(</span><span class="lit">60</span><span class="pun">,</span><span class="lit">10</span><span class="pun">,</span><span class="pln">response</span><span class="pun">.</span><span class="pln">title</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="str">'C'</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">ln</span><span class="pun">(</span><span class="lit">20</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">def</span><span class="pln"> footer</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="str">"hook to draw custom page footer (printing page numbers)"</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">set_y</span><span class="pun">(-</span><span class="lit">15</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">set_font</span><span class="pun">(</span><span class="str">'Arial'</span><span class="pun">,</span><span class="str">'I'</span><span class="pun">,</span><span class="lit">8</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; txt </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Page %s of %s'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">page_no</span><span class="pun">(),</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">alias_nb_pages</span><span class="pun">())</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">cell</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="lit">10</span><span class="pun">,</span><span class="pln">txt</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="str">'C'</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; pdf</span><span class="pun">=</span><span class="typ">MyFPDF</span><span class="pun">()</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com"># create a page and serialize/render HTML objects</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; pdf</span><span class="pun">.</span><span class="pln">add_page</span><span class="pun">()</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; pdf</span><span class="pun">.</span><span class="pln">write_html</span><span class="pun">(</span><span class="pln">str</span><span class="pun">(</span><span class="pln">XML</span><span class="pun">(</span><span class="pln">table</span><span class="pun">,</span><span class="pln"> sanitize</span><span class="pun">=</span><span class="kwd">False</span><span class="pun">)))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; pdf</span><span class="pun">.</span><span class="pln">write_html</span><span class="pun">(</span><span class="pln">str</span><span class="pun">(</span><span class="pln">XML</span><span class="pun">(</span><span class="pln">CENTER</span><span class="pun">(</span><span class="pln">chart</span><span class="pun">),</span><span class="pln"> sanitize</span><span class="pun">=</span><span class="kwd">False</span><span class="pun">)))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com"># prepare PDF to download:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; response</span><span class="pun">.</span><span class="pln">headers</span><span class="pun">[</span><span class="str">'Content-Type'</span><span class="pun">]=</span><span class="str">'application/pdf'</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> pdf</span><span class="pun">.</span><span class="pln">output</span><span class="pun">(</span><span class="pln">dest</span><span class="pun">=</span><span class="str">'S'</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">else</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com"># normal html view:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> dict</span><span class="pun">(</span><span class="pln">chart</span><span class="pun">=</span><span class="pln">chart</span><span class="pun">,</span><span class="pln"> table</span><span class="pun">=</span><span class="pln">table</span><span class="pun">)</span></pre><h1><a name="Sample_Table_Listing"></a>Sample Table Listing<a href="#Sample_Table_Listing" class="section_anchor"></a></h1><p>Also, you can make nice tables that automatically spreads over several pages, with header/footers, column/row highlight, etc., in a very pythonic way: </p><p>Sample: <a href="http://pyfpdf.googlecode.com/files/listing.pdf" rel="nofollow">listing.pdf</a> </p><p>Updated Live Demo (HTML and PDF version): </p><ul><li><a href="http://www.web2py.com.ar/fpdf/default/listing" rel="nofollow">http://www.web2py.com.ar/fpdf/default/listing</a> </li><li><a href="http://www.web2py.com.ar/fpdf/default/listing.pdf" rel="nofollow">http://www.web2py.com.ar/fpdf/default/listing.pdf</a> </li></ul><p></p><pre class="prettyprint"><span class="kwd">def</span><span class="pln"> listing</span><span class="pun">():</span><span class="pln"><br>&nbsp; &nbsp; response</span><span class="pun">.</span><span class="pln">title </span><span class="pun">=</span><span class="pln"> </span><span class="str">"web2py sample listing"</span><span class="pln"><br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="com"># define header and footers:</span><span class="pln"><br>&nbsp; &nbsp; head </span><span class="pun">=</span><span class="pln"> THEAD</span><span class="pun">(</span><span class="pln">TR</span><span class="pun">(</span><span class="pln">TH</span><span class="pun">(</span><span class="str">"Header 1"</span><span class="pun">,</span><span class="pln">_width</span><span class="pun">=</span><span class="str">"50%"</span><span class="pun">),</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TH</span><span class="pun">(</span><span class="str">"Header 2"</span><span class="pun">,</span><span class="pln">_width</span><span class="pun">=</span><span class="str">"30%"</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TH</span><span class="pun">(</span><span class="str">"Header 3"</span><span class="pun">,</span><span class="pln">_width</span><span class="pun">=</span><span class="str">"20%"</span><span class="pun">),</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _bgcolor</span><span class="pun">=</span><span class="str">"#A0A0A0"</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; foot </span><span class="pun">=</span><span class="pln"> TFOOT</span><span class="pun">(</span><span class="pln">TR</span><span class="pun">(</span><span class="pln">TH</span><span class="pun">(</span><span class="str">"Footer 1"</span><span class="pun">,</span><span class="pln">_width</span><span class="pun">=</span><span class="str">"50%"</span><span class="pun">),</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TH</span><span class="pun">(</span><span class="str">"Footer 2"</span><span class="pun">,</span><span class="pln">_width</span><span class="pun">=</span><span class="str">"30%"</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TH</span><span class="pun">(</span><span class="str">"Footer 3"</span><span class="pun">,</span><span class="pln">_width</span><span class="pun">=</span><span class="str">"20%"</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _bgcolor</span><span class="pun">=</span><span class="str">"#E0E0E0"</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="com"># create several rows:</span><span class="pln"><br>&nbsp; &nbsp; rows </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; col </span><span class="pun">=</span><span class="pln"> i </span><span class="pun">%</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> </span><span class="str">"#F0F0F0"</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="str">"#FFFFFF"</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; rows</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">TR</span><span class="pun">(</span><span class="pln">TD</span><span class="pun">(</span><span class="str">"Row %s"</span><span class="pln"> </span><span class="pun">%</span><span class="pln">i</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TD</span><span class="pun">(</span><span class="str">"something"</span><span class="pun">,</span><span class="pln"> _align</span><span class="pun">=</span><span class="str">"center"</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TD</span><span class="pun">(</span><span class="str">"%s"</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> i</span><span class="pun">,</span><span class="pln"> _align</span><span class="pun">=</span><span class="str">"right"</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;_bgcolor</span><span class="pun">=</span><span class="pln">col</span><span class="pun">))</span><span class="pln"> <br><br>&nbsp; &nbsp; </span><span class="com"># make the table object</span><span class="pln"><br>&nbsp; &nbsp; body </span><span class="pun">=</span><span class="pln"> TBODY</span><span class="pun">(*</span><span class="pln">rows</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; table </span><span class="pun">=</span><span class="pln"> TABLE</span><span class="pun">(*[</span><span class="pln">head</span><span class="pun">,</span><span class="pln">foot</span><span class="pun">,</span><span class="pln"> body</span><span class="pun">],</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _border</span><span class="pun">=</span><span class="str">"1"</span><span class="pun">,</span><span class="pln"> _align</span><span class="pun">=</span><span class="str">"center"</span><span class="pun">,</span><span class="pln"> _width</span><span class="pun">=</span><span class="str">"100%"</span><span class="pun">)</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> request</span><span class="pun">.</span><span class="pln">extension</span><span class="pun">==</span><span class="str">"pdf"</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">from</span><span class="pln"> gluon</span><span class="pun">.</span><span class="pln">contrib</span><span class="pun">.</span><span class="pln">pyfpdf </span><span class="kwd">import</span><span class="pln"> FPDF</span><span class="pun">,</span><span class="pln"> </span><span class="typ">HTMLMixin</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com"># define our FPDF class (move to modules if it is reused &nbsp;frequently)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyFPDF</span><span class="pun">(</span><span class="pln">FPDF</span><span class="pun">,</span><span class="pln"> </span><span class="typ">HTMLMixin</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">def</span><span class="pln"> header</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">set_font</span><span class="pun">(</span><span class="str">'Arial'</span><span class="pun">,</span><span class="str">'B'</span><span class="pun">,</span><span class="lit">15</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">cell</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="lit">10</span><span class="pun">,</span><span class="pln"> response</span><span class="pun">.</span><span class="pln">title </span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="str">'C'</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">ln</span><span class="pun">(</span><span class="lit">20</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">def</span><span class="pln"> footer</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">set_y</span><span class="pun">(-</span><span class="lit">15</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">set_font</span><span class="pun">(</span><span class="str">'Arial'</span><span class="pun">,</span><span class="str">'I'</span><span class="pun">,</span><span class="lit">8</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; txt </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Page %s of %s'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">page_no</span><span class="pun">(),</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">alias_nb_pages</span><span class="pun">())</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">cell</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="lit">10</span><span class="pun">,</span><span class="pln">txt</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="str">'C'</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; pdf</span><span class="pun">=</span><span class="typ">MyFPDF</span><span class="pun">()</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com"># first page:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; pdf</span><span class="pun">.</span><span class="pln">add_page</span><span class="pun">()</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; pdf</span><span class="pun">.</span><span class="pln">write_html</span><span class="pun">(</span><span class="pln">str</span><span class="pun">(</span><span class="pln">XML</span><span class="pun">(</span><span class="pln">table</span><span class="pun">,</span><span class="pln"> sanitize</span><span class="pun">=</span><span class="kwd">False</span><span class="pun">)))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; response</span><span class="pun">.</span><span class="pln">headers</span><span class="pun">[</span><span class="str">'Content-Type'</span><span class="pun">]=</span><span class="str">'application/pdf'</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> pdf</span><span class="pun">.</span><span class="pln">output</span><span class="pun">(</span><span class="pln">dest</span><span class="pun">=</span><span class="str">'S'</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">else</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com"># normal html view:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> dict</span><span class="pun">(</span><span class="pln">table</span><span class="pun">=</span><span class="pln">table</span><span class="pun">)}}}</span></pre><h1><a name="Samples_Template_Definitions"></a>Samples Template Definitions<a href="#Samples_Template_Definitions" class="section_anchor"></a></h1><p>As stated in the <a href="https://code.google.com/p/pyfpdf/wiki/Templates">Templates</a> page, there are 3 ways of putting your templates in place. As in that page there are samples for the manually hardcoded way and the CSV document loading, here we will only show a sample of the template engine. </p><h1><a name="Sample_Templating_Engine"></a>Sample Templating Engine<a href="#Sample_Templating_Engine" class="section_anchor"></a></h1><p>PyFPDF and web2py can be used to make PDF documents using templates like invoices, badges, certificates, etc.: </p><p>Sample: <a href="http://pyfpdf.googlecode.com/files/invoice.pdf" rel="nofollow">invoice.pdf</a> </p><p>Updated Live Demo: <a href="http://www.web2py.com.ar/fpdf/default/invoice.pdf" rel="nofollow">http://www.web2py.com.ar/fpdf/default/invoice.pdf</a> </p><p>To handle multiples templates, we can define two tables in web2py: </p><ul><li>pdf_template: document general information (name, paper size, etc.) </li><li>pdf_element: several rows for each document, describing graphics primitives and placeholders. </li></ul><p>In <tt>db.py</tt> write: </p><pre class="prettyprint"><span class="pln">db</span><span class="pun">.</span><span class="pln">define_table</span><span class="pun">(</span><span class="str">"pdf_template"</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"pdf_template_id"</span><span class="pun">,</span><span class="str">"id"</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"title"</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"format"</span><span class="pun">,</span><span class="pln"> requires</span><span class="pun">=</span><span class="pln">IS_IN_SET</span><span class="pun">([</span><span class="str">"A4"</span><span class="pun">,</span><span class="str">"legal"</span><span class="pun">,</span><span class="str">"letter"</span><span class="pun">])),</span><span class="pln"><br></span><span class="pun">)</span><span class="pln"><br><br>db</span><span class="pun">.</span><span class="pln">define_table</span><span class="pun">(</span><span class="str">"pdf_element"</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"pdf_template_id"</span><span class="pun">,</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">pdf_template</span><span class="pun">,</span><span class="pln"> requires</span><span class="pun">=</span><span class="pln">IS_IN_DB</span><span class="pun">(</span><span class="pln">db</span><span class="pun">,</span><span class="str">'pdf_template.pdf_template_id'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'pdf_template.title'</span><span class="pun">)),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"name"</span><span class="pun">,</span><span class="pln"> requires</span><span class="pun">=</span><span class="pln">IS_NOT_EMPTY</span><span class="pun">()),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"type"</span><span class="pun">,</span><span class="pln"> length</span><span class="pun">=</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> requires</span><span class="pun">=</span><span class="pln">IS_IN_SET</span><span class="pun">([</span><span class="str">'T'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'L'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'I'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'B'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'BC'</span><span class="pun">])),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"x1"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"double"</span><span class="pun">,</span><span class="pln"> requires</span><span class="pun">=</span><span class="pln">IS_NOT_EMPTY</span><span class="pun">()),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"y1"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"double"</span><span class="pun">,</span><span class="pln"> requires</span><span class="pun">=</span><span class="pln">IS_NOT_EMPTY</span><span class="pun">()),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"x2"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"double"</span><span class="pun">,</span><span class="pln"> requires</span><span class="pun">=</span><span class="pln">IS_NOT_EMPTY</span><span class="pun">()),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"y2"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"double"</span><span class="pun">,</span><span class="pln"> requires</span><span class="pun">=</span><span class="pln">IS_NOT_EMPTY</span><span class="pun">()),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"font"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">default</span><span class="pun">=</span><span class="str">"Arial"</span><span class="pun">,</span><span class="pln"> requires</span><span class="pun">=</span><span class="pln">IS_IN_SET</span><span class="pun">([</span><span class="str">'Courier'</span><span class="pun">,</span><span class="str">'Arial'</span><span class="pun">,</span><span class="str">'Times'</span><span class="pun">,</span><span class="str">'Symbol'</span><span class="pun">,</span><span class="str">'Zapfdingbats'</span><span class="pun">])),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"size"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"double"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">default</span><span class="pun">=</span><span class="str">"10"</span><span class="pun">,</span><span class="pln"> requires</span><span class="pun">=</span><span class="pln">IS_NOT_EMPTY</span><span class="pun">()),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"bold"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"boolean"</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"italic"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"boolean"</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"underline"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"boolean"</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"foreground"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"integer"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">default</span><span class="pun">=</span><span class="lit">0x000000</span><span class="pun">,</span><span class="pln"> comment</span><span class="pun">=</span><span class="str">"Color text"</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"background"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"integer"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">default</span><span class="pun">=</span><span class="lit">0xFFFFFF</span><span class="pun">,</span><span class="pln"> comment</span><span class="pun">=</span><span class="str">"Fill color"</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"align"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"string"</span><span class="pun">,</span><span class="pln"> length</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">default</span><span class="pun">=</span><span class="str">"L"</span><span class="pun">,</span><span class="pln"> requires</span><span class="pun">=</span><span class="pln">IS_IN_SET</span><span class="pun">([</span><span class="str">'L'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'R'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'C'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'J'</span><span class="pun">])),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"text"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"text"</span><span class="pun">,</span><span class="pln"> comment</span><span class="pun">=</span><span class="str">"Default text"</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Field</span><span class="pun">(</span><span class="str">"priority"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"integer"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">default</span><span class="pun">=</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> comment</span><span class="pun">=</span><span class="str">"Z-Order"</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">)</span></pre><p>Warning: the fields "type", "size" and "text" are reserved words for some DB engines, so validation: </p><pre class="prettyprint"><span class="pln">db </span><span class="pun">=</span><span class="pln"> DAL</span><span class="pun">(</span><span class="str">'sqlite://storage.sqlite'</span><span class="pun">,</span><span class="pln">pool_size</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="pln">check_reserved</span><span class="pun">=[</span><span class="str">'ALL'</span><span class="pun">])</span><span class="pln"><br></span><span class="pun">}}}</span><span class="pln"> will fail</span><span class="pun">.</span><span class="pln"> sqlite</span><span class="pun">,</span><span class="pln"> </span><span class="typ">MySQL</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> postgres work OK</span><span class="pun">.</span><span class="pln"> </span><span class="typ">Proposals</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> naming ideas are welcomed</span><span class="pun">.</span><span class="pln"><br><br></span><span class="typ">At</span><span class="pln"> </span><span class="kwd">this</span><span class="pln"> point you could go to web2py </span><span class="typ">AppAdmin</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> start to define your document templates</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="kwd">use</span><span class="pln"> </span><span class="kwd">import</span><span class="pun">/</span><span class="kwd">export</span><span class="pln"> functions to reuse your already </span><span class="kwd">defined</span><span class="pln"> formats</span><span class="pun">!</span><span class="pln"><br><br></span><span class="typ">Note</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> you used designer</span><span class="pun">.</span><span class="pln">py to create the templates</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> you want to </span><span class="kwd">import</span><span class="pln"> the templates </span><span class="kwd">with</span><span class="pln"> the </span><span class="typ">Web2Py</span><span class="pln"> database admin you will have to modify the file</span><span class="pun">.</span><span class="pln"><br><br></span><span class="typ">So</span><span class="pun">;</span><span class="pln"> designer</span><span class="pun">.</span><span class="pln">py outputs a file like </span><span class="kwd">this</span><span class="pun">:</span><span class="pln"> <br></span><span class="pun">{{{</span><span class="pln"><br>line0</span><span class="pun">;</span><span class="pln">T</span><span class="pun">;</span><span class="lit">20.0</span><span class="pun">;</span><span class="lit">13.0</span><span class="pun">;</span><span class="lit">190.0</span><span class="pun">;</span><span class="lit">13.0</span><span class="pun">;</span><span class="pln">times</span><span class="pun">;</span><span class="lit">10.0</span><span class="pun">;</span><span class="lit">0</span><span class="pun">;</span><span class="lit">0</span><span class="pun">;</span><span class="lit">0</span><span class="pun">;</span><span class="lit">0</span><span class="pun">;</span><span class="lit">65535</span><span class="pun">;</span><span class="pln">C</span><span class="pun">;;</span><span class="lit">0</span><span class="pln"><br>line1</span><span class="pun">;</span><span class="pln">T</span><span class="pun">;</span><span class="lit">20.0</span><span class="pun">;</span><span class="lit">67.0</span><span class="pun">;</span><span class="lit">190.0</span><span class="pun">;</span><span class="lit">67.0</span><span class="pun">;</span><span class="pln">times</span><span class="pun">;</span><span class="lit">10.0</span><span class="pun">;</span><span class="lit">0</span><span class="pun">;</span><span class="lit">0</span><span class="pun">;</span><span class="lit">0</span><span class="pun">;</span><span class="lit">0</span><span class="pun">;</span><span class="lit">65535</span><span class="pun">;</span><span class="pln">C</span><span class="pun">;;</span><span class="lit">0</span><span class="pln"><br>name0</span><span class="pun">;</span><span class="pln">T</span><span class="pun">;</span><span class="lit">21</span><span class="pun">;</span><span class="lit">14</span><span class="pun">;</span><span class="lit">104</span><span class="pun">;</span><span class="lit">25</span><span class="pun">;</span><span class="pln">times</span><span class="pun">;</span><span class="lit">16.0</span><span class="pun">;</span><span class="lit">0</span><span class="pun">;</span><span class="lit">0</span><span class="pun">;</span><span class="lit">0</span><span class="pun">;</span><span class="lit">0</span><span class="pun">;</span><span class="lit">0</span><span class="pun">;</span><span class="pln">C</span><span class="pun">;;</span><span class="lit">2</span><span class="pln"><br>title0</span><span class="pun">;</span><span class="pln">T</span><span class="pun">;</span><span class="lit">64</span><span class="pun">;</span><span class="lit">26</span><span class="pun">;</span><span class="lit">104</span><span class="pun">;</span><span class="lit">30</span><span class="pun">;</span><span class="pln">times</span><span class="pun">;</span><span class="lit">10.0</span><span class="pun">;</span><span class="lit">0</span><span class="pun">;</span><span class="lit">0</span><span class="pun">;</span><span class="lit">0</span><span class="pun">;</span><span class="lit">0</span><span class="pun">;</span><span class="lit">0</span><span class="pun">;</span><span class="pln">C</span><span class="pun">;;</span><span class="lit">2</span><span class="pln"><br></span><span class="pun">}}}</span><span class="pln"><br><br></span><span class="typ">You</span><span class="pln"> will have to make it look lke </span><span class="kwd">this</span><span class="pun">:</span><span class="pln"><br><br></span><span class="pun">{{{</span><span class="pln"><br>pdf_element</span><span class="pun">.</span><span class="pln">pdf_template_id</span><span class="pun">,</span><span class="pln"> pdf_element</span><span class="pun">.</span><span class="pln">name</span><span class="pun">,</span><span class="pln"> pdf_element</span><span class="pun">.</span><span class="pln">type</span><span class="pun">,</span><span class="pln"> pdf_element</span><span class="pun">.</span><span class="pln">x1</span><span class="pun">,</span><span class="pln"> pdf_element</span><span class="pun">.</span><span class="pln">y1</span><span class="pun">,</span><span class="pln"> pdf_element</span><span class="pun">.</span><span class="pln">x2</span><span class="pun">,</span><span class="pln"> pdf_element</span><span class="pun">.</span><span class="pln">y2</span><span class="pun">,</span><span class="pln"> pdf_element</span><span class="pun">.</span><span class="pln">font</span><span class="pun">,</span><span class="pln"> pdf_element</span><span class="pun">.</span><span class="pln">size</span><span class="pun">,</span><span class="pln"> pdf_element</span><span class="pun">.</span><span class="pln">bold</span><span class="pun">,</span><span class="pln"> pdf_element</span><span class="pun">.</span><span class="pln">italic</span><span class="pun">,</span><span class="pln"> pdf_element</span><span class="pun">.</span><span class="pln">underline</span><span class="pun">,</span><span class="pln"> pdf_element</span><span class="pun">.</span><span class="pln">foreground</span><span class="pun">,</span><span class="pln"> pdf_element</span><span class="pun">.</span><span class="pln">background</span><span class="pun">,</span><span class="pln"> pdf_element</span><span class="pun">.</span><span class="pln">align</span><span class="pun">,</span><span class="pln"> pdf_element</span><span class="pun">.</span><span class="pln">text</span><span class="pun">,</span><span class="pln"> pdf_element</span><span class="pun">.</span><span class="pln">priority<br></span><span class="lit">1</span><span class="pun">,</span><span class="pln">line0</span><span class="pun">,</span><span class="pln">T</span><span class="pun">,</span><span class="lit">20.0</span><span class="pun">,</span><span class="lit">283.0</span><span class="pun">,</span><span class="lit">190.0</span><span class="pun">,</span><span class="lit">283.0</span><span class="pun">,</span><span class="pln">times</span><span class="pun">,</span><span class="lit">10.0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">65535</span><span class="pun">,</span><span class="pln">C</span><span class="pun">,,</span><span class="lit">0</span><span class="pln"><br></span><span class="lit">1</span><span class="pun">,</span><span class="pln">line1</span><span class="pun">,</span><span class="pln">T</span><span class="pun">,</span><span class="lit">20.0</span><span class="pun">,</span><span class="lit">337.0</span><span class="pun">,</span><span class="lit">190.0</span><span class="pun">,</span><span class="lit">337.0</span><span class="pun">,</span><span class="pln">times</span><span class="pun">,</span><span class="lit">10.0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">65535</span><span class="pun">,</span><span class="pln">C</span><span class="pun">,,</span><span class="lit">0</span><span class="pln"><br></span><span class="lit">1</span><span class="pun">,</span><span class="pln">name0</span><span class="pun">,</span><span class="pln">T</span><span class="pun">,</span><span class="lit">21</span><span class="pun">,</span><span class="lit">14</span><span class="pun">,</span><span class="lit">104</span><span class="pun">,</span><span class="lit">25</span><span class="pun">,</span><span class="pln">times</span><span class="pun">,</span><span class="lit">16.0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="pln">C</span><span class="pun">,,</span><span class="lit">2</span><span class="pln"><br></span><span class="lit">1</span><span class="pun">,</span><span class="pln">title0</span><span class="pun">,</span><span class="pln">T</span><span class="pun">,</span><span class="lit">64</span><span class="pun">,</span><span class="lit">26</span><span class="pun">,</span><span class="lit">104</span><span class="pun">,</span><span class="lit">30</span><span class="pun">,</span><span class="pln">times</span><span class="pun">,</span><span class="lit">10.0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="pln">C</span><span class="pun">,,</span><span class="lit">2</span><span class="pln"><br></span><span class="pun">}}}</span><span class="pln"><br></span><span class="typ">Where</span><span class="pln"> the first number indicates the </span><span class="kwd">template</span><span class="pln"> ID </span><span class="pun">(</span><span class="pln">important </span><span class="kwd">for</span><span class="pln"> the database system</span><span class="pun">),</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> the first line indicates the database fields to fill</span><span class="pun">.</span><span class="pln"><br><br>A simple python script should </span><span class="kwd">do</span><span class="pln"> the trick</span><span class="pun">.</span><span class="pln"><br><br></span><span class="typ">After</span><span class="pln"> defining </span><span class="kwd">and</span><span class="pln"> filling your database</span><span class="pun">,</span><span class="pln"> you can </span><span class="kwd">use</span><span class="pln"> </span><span class="typ">PyFPDF</span><span class="pln"> </span><span class="pun">[</span><span class="typ">Templates</span><span class="pun">]</span><span class="pln"> directly reading rows elements </span><span class="kwd">from</span><span class="pln"> the web2py database</span><span class="pun">:</span><span class="pln"><br><br></span><span class="typ">For</span><span class="pln"> example</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> an invoice</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> a controller you could write</span><span class="pun">:</span><span class="pln"><br></span><span class="pun">{{{</span><span class="pln"><br></span><span class="kwd">def</span><span class="pln"> invoice</span><span class="pun">():</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">from</span><span class="pln"> gluon</span><span class="pun">.</span><span class="pln">contrib</span><span class="pun">.</span><span class="pln">pyfpdf </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">Template</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">import</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">path<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="com"># generate sample invoice (according Argentina's regulations)</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">import</span><span class="pln"> random<br>&nbsp; &nbsp; </span><span class="kwd">from</span><span class="pln"> </span><span class="kwd">decimal</span><span class="pln"> </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">Decimal</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="com"># read elements from db </span><span class="pln"><br>&nbsp; &nbsp; <br>&nbsp; &nbsp; elements </span><span class="pun">=</span><span class="pln"> db</span><span class="pun">(</span><span class="pln">db</span><span class="pun">.</span><span class="pln">pdf_element</span><span class="pun">.</span><span class="pln">pdf_template_id</span><span class="pun">==</span><span class="lit">1</span><span class="pun">).</span><span class="kwd">select</span><span class="pun">(</span><span class="kwd">orderby</span><span class="pun">=</span><span class="pln">db</span><span class="pun">.</span><span class="pln">pdf_element</span><span class="pun">.</span><span class="pln">priority</span><span class="pun">)</span><span class="pln"><br><br>&nbsp; &nbsp; f </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Template</span><span class="pun">(</span><span class="pln">format</span><span class="pun">=</span><span class="str">"A4"</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;elements </span><span class="pun">=</span><span class="pln"> elements</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;title</span><span class="pun">=</span><span class="str">"Sample Invoice"</span><span class="pun">,</span><span class="pln"> author</span><span class="pun">=</span><span class="str">"Sample Company"</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;subject</span><span class="pun">=</span><span class="str">"Sample Customer"</span><span class="pun">,</span><span class="pln"> keywords</span><span class="pun">=</span><span class="str">"Electronic TAX Invoice"</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="com"># create some random invoice line items and detail data</span><span class="pln"><br>&nbsp; &nbsp; detail </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Lorem ipsum dolor sit amet, consectetur. "</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">5</span><span class="pln"><br>&nbsp; &nbsp; items </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">30</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; ds </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Sample product %s"</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> i<br>&nbsp; &nbsp; &nbsp; &nbsp; qty </span><span class="pun">=</span><span class="pln"> random</span><span class="pun">.</span><span class="pln">randint</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">10</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; price </span><span class="pun">=</span><span class="pln"> round</span><span class="pun">(</span><span class="pln">random</span><span class="pun">.</span><span class="pln">random</span><span class="pun">()*</span><span class="lit">100</span><span class="pun">,</span><span class="lit">3</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; code </span><span class="pun">=</span><span class="pln"> </span><span class="str">"%s%s%02d"</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="pun">(</span><span class="pln">chr</span><span class="pun">(</span><span class="pln">random</span><span class="pun">.</span><span class="pln">randint</span><span class="pun">(</span><span class="lit">65</span><span class="pun">,</span><span class="lit">90</span><span class="pun">)),</span><span class="pln"> chr</span><span class="pun">(</span><span class="pln">random</span><span class="pun">.</span><span class="pln">randint</span><span class="pun">(</span><span class="lit">65</span><span class="pun">,</span><span class="lit">90</span><span class="pun">)),</span><span class="pln">i</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; items</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">dict</span><span class="pun">(</span><span class="pln">code</span><span class="pun">=</span><span class="pln">code</span><span class="pun">,</span><span class="pln"> unit</span><span class="pun">=</span><span class="str">'u'</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; qty</span><span class="pun">=</span><span class="pln">qty</span><span class="pun">,</span><span class="pln"> price</span><span class="pun">=</span><span class="pln">price</span><span class="pun">,</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; amount</span><span class="pun">=</span><span class="pln">qty</span><span class="pun">*</span><span class="pln">price</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ds</span><span class="pun">=</span><span class="str">"%s: %s"</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i</span><span class="pun">,</span><span class="pln">ds</span><span class="pun">)))</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="com"># divide and count lines</span><span class="pln"><br>&nbsp; &nbsp; lines </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"><br>&nbsp; &nbsp; li_items </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> it </span><span class="kwd">in</span><span class="pln"> items</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; qty </span><span class="pun">=</span><span class="pln"> it</span><span class="pun">[</span><span class="str">'qty'</span><span class="pun">]</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; code </span><span class="pun">=</span><span class="pln"> it</span><span class="pun">[</span><span class="str">'code'</span><span class="pun">]</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; unit </span><span class="pun">=</span><span class="pln"> it</span><span class="pun">[</span><span class="str">'unit'</span><span class="pun">]</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> ds </span><span class="kwd">in</span><span class="pln"> f</span><span class="pun">.</span><span class="pln">split_multicell</span><span class="pun">(</span><span class="pln">it</span><span class="pun">[</span><span class="str">'ds'</span><span class="pun">],</span><span class="pln"> </span><span class="str">'item_description01'</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com"># add item description line (without price nor amount)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; li_items</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">dict</span><span class="pun">(</span><span class="pln">code</span><span class="pun">=</span><span class="pln">code</span><span class="pun">,</span><span class="pln"> ds</span><span class="pun">=</span><span class="pln">ds</span><span class="pun">,</span><span class="pln"> qty</span><span class="pun">=</span><span class="pln">qty</span><span class="pun">,</span><span class="pln"> unit</span><span class="pun">=</span><span class="pln">unit</span><span class="pun">,</span><span class="pln"> price</span><span class="pun">=</span><span class="kwd">None</span><span class="pun">,</span><span class="pln"> amount</span><span class="pun">=</span><span class="kwd">None</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com"># clean qty and code (show only at first)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unit </span><span class="pun">=</span><span class="pln"> qty </span><span class="pun">=</span><span class="pln"> code </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">None</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com"># set last item line price and amount</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; li_items</span><span class="pun">[-</span><span class="lit">1</span><span class="pun">].</span><span class="pln">update</span><span class="pun">(</span><span class="pln">amount </span><span class="pun">=</span><span class="pln"> it</span><span class="pun">[</span><span class="str">'amount'</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; price </span><span class="pun">=</span><span class="pln"> it</span><span class="pun">[</span><span class="str">'price'</span><span class="pun">])</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="com"># split detail into each line description</span><span class="pln"><br>&nbsp; &nbsp; obs</span><span class="pun">=</span><span class="str">"\n&lt;U&gt;Detail:&lt;/U&gt;\n\n"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> detail<br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> ds </span><span class="kwd">in</span><span class="pln"> f</span><span class="pun">.</span><span class="pln">split_multicell</span><span class="pun">(</span><span class="pln">obs</span><span class="pun">,</span><span class="pln"> </span><span class="str">'item_description01'</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; li_items</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">dict</span><span class="pun">(</span><span class="pln">code</span><span class="pun">=</span><span class="pln">code</span><span class="pun">,</span><span class="pln"> ds</span><span class="pun">=</span><span class="pln">ds</span><span class="pun">,</span><span class="pln"> qty</span><span class="pun">=</span><span class="pln">qty</span><span class="pun">,</span><span class="pln"> unit</span><span class="pun">=</span><span class="pln">unit</span><span class="pun">,</span><span class="pln"> price</span><span class="pun">=</span><span class="kwd">None</span><span class="pun">,</span><span class="pln"> amount</span><span class="pun">=</span><span class="kwd">None</span><span class="pun">))</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="com"># calculate pages:</span><span class="pln"><br>&nbsp; &nbsp; lines </span><span class="pun">=</span><span class="pln"> len</span><span class="pun">(</span><span class="pln">li_items</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; max_lines_per_page </span><span class="pun">=</span><span class="pln"> </span><span class="lit">24</span><span class="pln"><br>&nbsp; &nbsp; pages </span><span class="pun">=</span><span class="pln"> lines </span><span class="pun">/</span><span class="pln"> </span><span class="pun">(</span><span class="pln">max_lines_per_page </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> lines </span><span class="pun">%</span><span class="pln"> </span><span class="pun">(</span><span class="pln">max_lines_per_page </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">):</span><span class="pln"> pages </span><span class="pun">=</span><span class="pln"> pages </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="com"># fill placeholders for each page</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> page </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> pages</span><span class="pun">+</span><span class="lit">1</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">.</span><span class="pln">add_page</span><span class="pun">()</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">'page'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Page %s of %s'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="pun">(</span><span class="pln">page</span><span class="pun">,</span><span class="pln"> pages</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> pages</span><span class="pun">&gt;</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> page</span><span class="pun">&lt;</span><span class="pln">pages</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Continues on page %s'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="pun">(</span><span class="pln">page</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">else</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">'item_description%02d'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="pun">(</span><span class="pln">max_lines_per_page</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> s<br><br>&nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">"company_name"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Sample Company"</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">"company_logo"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">path</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="pln">request</span><span class="pun">.</span><span class="pln">env</span><span class="pun">.</span><span class="pln">web2py_path</span><span class="pun">,</span><span class="str">"gluon"</span><span class="pun">,</span><span class="str">"contrib"</span><span class="pun">,</span><span class="str">"pyfpdf"</span><span class="pun">,</span><span class="str">"tutorial"</span><span class="pun">,</span><span class="str">"logo.png"</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">"company_header1"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Some Address - somewhere -"</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">"company_header2"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"http://www.example.com"</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">"company_footer1"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Tax Code ..."</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">"company_footer2"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Tax/VAT ID ..."</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">'number'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'0001-00001234'</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">'issue_date'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'2010-09-10'</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">'due_date'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'2099-09-10'</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">'customer_name'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Sample Client"</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">'customer_address'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Siempreviva 1234"</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com"># print line item...</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; li </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; k </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; total </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Decimal</span><span class="pun">(</span><span class="str">"0.00"</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> it </span><span class="kwd">in</span><span class="pln"> li_items</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; k </span><span class="pun">=</span><span class="pln"> k </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> k </span><span class="pun">&gt;</span><span class="pln"> page </span><span class="pun">*</span><span class="pln"> </span><span class="pun">(</span><span class="pln">max_lines_per_page </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">break</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> it</span><span class="pun">[</span><span class="str">'amount'</span><span class="pun">]:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; total </span><span class="pun">+=</span><span class="pln"> </span><span class="typ">Decimal</span><span class="pun">(</span><span class="str">"%.6f"</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> it</span><span class="pun">[</span><span class="str">'amount'</span><span class="pun">])</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> k </span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">page </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="pun">(</span><span class="pln">max_lines_per_page </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; li </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">1</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> it</span><span class="pun">[</span><span class="str">'qty'</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> </span><span class="kwd">None</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">'item_quantity%02d'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> li</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> it</span><span class="pun">[</span><span class="str">'qty'</span><span class="pun">]</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> it</span><span class="pun">[</span><span class="str">'code'</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> </span><span class="kwd">None</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">'item_code%02d'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> li</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> it</span><span class="pun">[</span><span class="str">'code'</span><span class="pun">]</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> it</span><span class="pun">[</span><span class="str">'unit'</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> </span><span class="kwd">None</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">'item_unit%02d'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> li</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> it</span><span class="pun">[</span><span class="str">'unit'</span><span class="pun">]</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">'item_description%02d'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> li</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> it</span><span class="pun">[</span><span class="str">'ds'</span><span class="pun">]</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> it</span><span class="pun">[</span><span class="str">'price'</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> </span><span class="kwd">None</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">'item_price%02d'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> li</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"%0.3f"</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> it</span><span class="pun">[</span><span class="str">'price'</span><span class="pun">]</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> it</span><span class="pun">[</span><span class="str">'amount'</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> </span><span class="kwd">None</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">'item_amount%02d'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> li</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"%0.2f"</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> it</span><span class="pun">[</span><span class="str">'amount'</span><span class="pun">]</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com"># last page? print totals:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> pages </span><span class="pun">==</span><span class="pln"> page</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">'net'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"%0.2f"</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="pun">(</span><span class="pln">total</span><span class="pun">/</span><span class="typ">Decimal</span><span class="pun">(</span><span class="str">"1.21"</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">'vat'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"%0.2f"</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="pun">(</span><span class="pln">total</span><span class="pun">*(</span><span class="lit">1</span><span class="pun">-</span><span class="lit">1</span><span class="pun">/</span><span class="typ">Decimal</span><span class="pun">(</span><span class="str">"1.21"</span><span class="pun">)))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">'total_label'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Total:'</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">else</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">'total_label'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'SubTotal:'</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">[</span><span class="str">'total'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"%0.2f"</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> total<br><br>&nbsp; &nbsp; response</span><span class="pun">.</span><span class="pln">headers</span><span class="pun">[</span><span class="str">'Content-Type'</span><span class="pun">]=</span><span class="str">'application/pdf'</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> f</span><span class="pun">.</span><span class="pln">render</span><span class="pun">(</span><span class="str">'invoice.pdf'</span><span class="pun">,</span><span class="pln"> dest</span><span class="pun">=</span><span class="str">'S'</span><span class="pun">)</span><span class="pln"><br></span><span class="pun">}}}</span><span class="pln"><br><br></span><span class="typ">Of</span><span class="pln"> course</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> a hardcoded example</span><span class="pun">,</span><span class="pln"> you can </span><span class="kwd">use</span><span class="pln"> the database to store invoices </span><span class="kwd">or</span><span class="pln"> any other data</span><span class="pun">,</span><span class="pln"> there </span><span class="kwd">is</span><span class="pln"> </span><span class="kwd">no</span><span class="pln"> rigid </span><span class="kwd">class</span><span class="pln"> hierachy to follow</span><span class="pun">,</span><span class="pln"> just fill your </span><span class="kwd">template</span><span class="pln"> like a dict</span><span class="pun">!</span></pre>
 </div>
 </div>
 </td></tr><tr>
</tr></tbody></table>
 </div>


 
 <div id="wikicommentcol">
 


 
 
 
 
 
 
 
 
 
 
 
 
 
 
 

<div class="collapse">


 


<div id="commentlist">

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/109526242927334053710/">Ovidio...@gmail.com</a>,
 
 </span>
 <span class="date" title="Mon Sep 13 03:49:22 2010">Sep 13, 2010</span>
 <div>
<div class="commentcontent">
<p>well, I am not able to understand, how to call the report for my application. If I understand what is explained is that we implement the dual tables, and pdf_template pdf_element. But within my application how do I call the report? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/reingart/">reingart</a>,
 
 </span>
 <span class="date" title="Tue Sep 14 05:11:04 2010">Sep 14, 2010</span>
 <div>
<div class="commentcontent">
<p>I've added "live demos" showing how to call web2py controllers (html and pdf views, when available). In downloads there is an sample application. </p><p>PS: can you fill an issue, as googlecode project updates seems broken... (and there we can attach code, examples and so on) </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/109526242927334053710/">Ovidio...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sat Sep 18 12:37:49 2010">Sep 18, 2010</span>
 <div>
<div class="commentcontent">
<p>Thank you for answering the previous post. But if I need to do a report by filtering by date, as do the data entry??? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/yamandu.costa/">yamandu.costa</a>,
 
 </span>
 <span class="date" title="Mon Sep 27 18:47:09 2010">Sep 27, 2010</span>
 <div>
<div class="commentcontent">
<p>I´ve put some usable thing in a slice: <a href="http://web2pyslices.com/main/slices/take_slice/99" rel="nofollow">http://web2pyslices.com/main/slices/take_slice/99</a> </p><p>It does a simple report by letting the user pick a date range, filtering a table  and providing a PDF button to get the PDF version. </p><p>I think it can get better, so please test and comment! </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/106692353007924806818/">ankita.s...@gmail.com</a>,
 
 </span>
 <span class="date" title="Thu Mar  1 12:09:26 2012">Mar 1, 2012</span>
 <div>
<div class="commentcontent">
<p>I'm looking for php.... how can i implement that please tell me... i want such class to be more implemented than existing on on fpdf for writeHTML.. that doesnot accept table tag. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/103373478248221394570/">adesanto...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Mar 21 11:16:54 2012">Mar 21, 2012</span>
 <div>
<div class="commentcontent">
<p>Hello, nice work and share. </p><p>I experienced odd output, the header() seems not handled the linefeed at the next page properly  as the example  </p><pre class="prettyprint"><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyFPDF</span><span class="pun">(...):</span><span class="pln"><br><br><br>&nbsp; &nbsp; </span><span class="kwd">def</span><span class="pln"> header</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">...</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">ln</span><span class="pun">(</span><span class="lit">20</span><span class="pun">)</span></pre><p>I would like to suggest </p><pre class="prettyprint"><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyFPDF</span><span class="pun">(...):</span><span class="pln"><br><br><br>&nbsp; &nbsp; </span><span class="kwd">def</span><span class="pln"> header</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; ln </span><span class="pun">=</span><span class="pln"> </span><span class="lit">20</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; first_page </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">...</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">page_no </span><span class="pun">&gt;</span><span class="pln"> first_page</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">ln</span><span class="pun">(</span><span class="pln">ln</span><span class="pun">*</span><span class="lit">2</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">else</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">ln</span><span class="pun">(</span><span class="pln">ln</span><span class="pun">)</span></pre><p>Hope it helps </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/110665799752208780239/">mweis...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed May  1 21:34:13 2013">May 1, 2013</span>
 <div>
<div class="commentcontent">
<p>First example "report": import os is missing </p>
</div>
 
 
 </div>
 </div>
 

</div>
</div>

 


 


 </div>
 
 
 
 
 
 <div id="commentform">
 <form action="https://code.google.com/p/pyfpdf/w/detail.do" method="post">
 <table>
 <tbody><tr><td class="vt">
 <input name="pagename" value="Web2Py" type="hidden">
 <input name="token" value="l7pH_Sx_WbyPQ52h1x569qGTWDs:1369291934664" type="hidden">
 <div class="graytext" style="float: right;">
 Hint: You can use <a href="http://code.google.com/p/support/wiki/WikiSyntax">Wiki Syntax.</a>
 </div>
 <div>Enter a comment:</div>
 <textarea id="itsalltext_generated_id_content_1" name="content" rows="6" cols="100"></textarea><img style="cursor: pointer ! important; display: none ! important; position: absolute ! important; padding: 0px ! important; margin: 0px ! important; border: medium none ! important; width: 28px ! important; height: 14px ! important; opacity: 0.0152174 ! important; left: 699px ! important; top: 6862px ! important;" title="It's All Text!" src="chrome://itsalltext/locale/gumdrop.png"><img style="cursor: pointer ! important; display: none ! important; position: absolute ! important; padding: 0px ! important; margin: 0px ! important; border: medium none ! important; width: 28px ! important; height: 14px ! important; opacity: 0.0152174 ! important; left: 711px ! important; top: 6874px ! important;" title="It's All Text!" src="chrome://itsalltext/locale/gumdrop.png"><br><br>
 <input name="submit" value="Submit" type="submit">
 </td>
 </tr></tbody></table>
 </form>
 </div>
 
 
 
 
 
 <form name="delcom" action="https://code.google.com/p/pyfpdf/w/delComment.do" method="POST">
 <input name="sequence_num" value="" type="hidden">
 <input name="create_time" value="" type="hidden">
 <input name="mode" value="" type="hidden">
 <input name="pagename" value="Web2Py" type="hidden">
 <input name="token" value="l7pH_Sx_WbyPQ52h1x569qGTWDs:1369291934664" type="hidden">
 </form>


 
 





  
 
 
 
 
 
 
 
 
 
</div> 

<div id="footer" dir="ltr">
 <div class="text">
 <a href="https://code.google.com/projecthosting/terms.html">Terms</a> -
 <a href="http://www.google.com/privacy.html">Privacy</a> -
 <a href="https://code.google.com/p/support/">Project Hosting Help</a>
 </div>
</div>
 <div class="hostedBy" style="margin-top: -20px;">
 <span style="vertical-align: top;">Powered by <a href="http://code.google.com/projecthosting/">Google Project Hosting</a></span>
 </div>

 
 


 
 



<div style="position: absolute; display: none; top: 19px; left: 814px;" id="menuDiv-projects-dropdown" class="menuDiv instance0"><div style="display: none;" class="menuCategory default"></div><b style="display: block;" class="categoryTitle projects">Projects</b><div class="menuCategory projects first"><a href="https://code.google.com/p/tazjel/" style="display: block;" class="menuItem">tazjel</a></div><b style="display: block;" class="categoryTitle starred_projects">Starred projects</b><div class="menuCategory starred_projects"><a href="https://code.google.com/p/altdrag/" style="display: block;" class="menuItem">altdrag</a><a href="https://code.google.com/p/apt-cyg/" style="display: block;" class="menuItem">apt-cyg</a><a href="https://code.google.com/p/ardesia/" style="display: block;" class="menuItem">ardesia</a><a href="https://code.google.com/p/autokey/" style="display: block;" class="menuItem">autokey</a><a href="https://code.google.com/p/copyq/" style="display: block;" class="menuItem">copyq</a><a href="https://code.google.com/p/cyg-apt/" style="display: block;" class="menuItem">cyg-apt</a><a href="https://code.google.com/p/dragonfly/" style="display: block;" class="menuItem">dragonfly</a><a href="https://code.google.com/p/googlefontdirectory/" style="display: block;" class="menuItem">googlefontdirectory</a><a href="https://code.google.com/p/jquery-ui-vk/" style="display: block;" class="menuItem">jquery-ui-vk</a><a href="https://code.google.com/p/key-mon/" style="display: block;" class="menuItem">key-mon</a><a href="https://code.google.com/p/mintty/" style="display: block;" class="menuItem">mintty</a><a href="https://code.google.com/p/mobileterminal/" style="display: block;" class="menuItem">mobileterminal</a><a href="https://code.google.com/p/msysgit/" style="display: block;" class="menuItem">msysgit</a><a href="https://code.google.com/p/music21/" style="display: block;" class="menuItem">music21</a><a href="https://code.google.com/p/puttycyg/" style="display: block;" class="menuItem">puttycyg</a><a href="https://code.google.com/p/swapy/" style="display: block;" class="menuItem">swapy</a><a href="https://code.google.com/p/textroom/" style="display: block;" class="menuItem">textroom</a><a href="https://code.google.com/p/tweetx/" style="display: block;" class="menuItem">tweetx</a><a href="https://code.google.com/p/uc-debug/" style="display: block;" class="menuItem">uc-debug</a><a href="https://code.google.com/p/web2py/" style="display: block;" class="menuItem">web2py</a></div><div class="menuCategory controls"><hr class="menuSeparator"><a href="https://code.google.com/hosting/" style="display: block;" class="menuItem">Find open source projects...</a><a href="https://code.google.com/hosting/createProject" style="display: block;" class="menuItem">Create a project...</a></div></div><div style="position: absolute; display: none; top: 19px; left: 680px;" id="menuDiv-multilogin-dropdown" class="menuDiv instance1"><div class="menuCategory default first"><span style="display: block;" class="menuText"><b>tazjel@gmail.com</b></span><a href="https://code.google.com/p/pyfpdf/wiki/Web2Py?authuser=1" style="display: block;" class="menuItem">abobani@gmail.com</a></div><div class="menuCategory controls"><hr class="menuSeparator"><a href="http://www.google.com/accounts/AddSession?service=code&amp;continue=https%3A%2F%2Fcode.google.com%2Fp%2Fpyfpdf%2Fwiki%2FWeb2Py" style="display: block;" class="menuItem"><nobr>Sign in with another account...</nobr></a></div></div>

</body></html>
